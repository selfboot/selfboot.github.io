---
title: C/C++ 中的随机数
tags:
  - C++
category: 程序设计
toc: true
description: 
date: 
---

相信每个程序员都会用到随机数，

计算机生成伪随机数时面临的主要问题包括：

1. 可预测性：由于伪随机数生成器（PRNGs）是基于算法的，它们实际上是确定性的。这意味着如果攻击者知道算法的状态或种子值，他们可以预测后续生成的随机数序列。这在需要高度安全性的应用中（如密码学）是一个重大问题。
2. 周期性：所有的伪随机数生成器都有一个“周期”，这是在重复之前可以生成的唯一随机数序列的长度。一个好的PRNG应该有一个足够长的周期，以避免在实际使用中出现重复。
3. 分布不均匀：理想的随机数生成器应该能够生成均匀分布的随机数。然而，某些PRNG算法可能在其输出中表现出偏差或模式，这会导致分布不均。
4. 效率：生成高质量伪随机数的算法可能在计算上非常复杂和耗时，这在需要快速生成大量随机数的应用中可能成为瓶颈。



计算机生成伪随机数时面临的主要问题包括：

### 1. 可预测性
由于伪随机数生成器（PRNGs）是基于算法的，它们实际上是确定性的。这意味着如果攻击者知道算法的状态或种子值，他们可以预测后续生成的随机数序列。这在需要高度安全性的应用中（如密码学）是一个重大问题。

### 2. 周期性
所有的伪随机数生成器都有一个“周期”，这是在重复之前可以生成的唯一随机数序列的长度。一个好的PRNG应该有一个足够长的周期，以避免在实际使用中出现重复。

### 3. 分布不均匀
理想的随机数生成器应该能够生成均匀分布的随机数。然而，某些PRNG算法可能在其输出中表现出偏差或模式，这会导致分布不均。

### 4. 效率
生成高质量伪随机数的算法可能在计算上非常复杂和耗时，这在需要快速生成大量随机数的应用中可能成为瓶颈。

### 不断迭代和优化的算法

为了解决上述问题，研究人员和开发人员已经设计了多种PRNG算法，不断迭代和优化以提高性能和随机性质量：

1. **线性同余生成器（LCGs）**
   - 线性同余方法是最早的PRNG之一，由简单的数学公式产生随机数序列。虽然实现简单，但它们通常有较短的周期和潜在的分布不均问题。

2. **梅森旋转算法（Mersenne Twister）**
   - Mersenne Twister，尤其是它的MT19937版本，是一种广泛使用的高质量PRNG，具有非常长的周期（\(2^{19937}-1\)）和良好的统计特性。但是，它的状态空间相对较大，初始化需要一定的时间。

3. **密码学安全伪随机数生成器（CSPRNGs）**
   - CSPRNGs设计用于密码学应用，如生成加密密钥。它们提供更好的不可预测性，并通过如哈希函数、块密码或流密码的密码学原理来实现。示例包括Fortuna和Yarrow算法。

4. **Xorshift生成器**
   - Xorshift是一种基于异或位移操作的PRNG，因其简单和高性能而受到关注。其变种Xorshift+和Xoroshiro+在提供良好随机性的同时保持了高效性。

5. **PCG（Permuted Congruential Generator）**
   - PCG系列是一组更现代的PRNG，它们旨在提供更好的统计特性和更高的性能。PCG算法易于实现，提供了良好的随机性和可定制的特性，如可控的周期长度。

选择合适的PRNG算法需要根据应用的具体需求来决定，如是否需要密码学安全、生成速度要求以及随机数分布的均匀性等。对于大多数非安全相关的应用，如模拟或游戏，Mersenne Twister或PCG算法提供了良好的平衡。对于安全相关的应用，则必须使用CSPRNG。
