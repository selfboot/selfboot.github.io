<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="baidu-site-verification" content="codeva-NxrUEx2EFN"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="深入探讨C++中的未定义行为。这篇文章详细解释了未定义行为的概念，以及为什么它们存在，以及如何避免它们。对于希望提高C++编程技能的读者来说，这是一篇不容错过的文章。"><title>C++ 中的未定义行为</title><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml,en/atom.xml"><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;973c5bad683a49b8af76df256779f523&quot;}"></script>
<script defer="" src="https://cloud.umami.is/script.js" data-website-id="3578d9f2-9ea0-49d4-8781-e8d1217ab924"></script><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="referrer" content="no-referrer-when-downgrade"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QNFB9JLSPV"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QNFB9JLSPV');
</script><script async="" type="text/javascript" src="/js/clipboard.min.js"></script><script async="" type="text/javascript" src="/js/toastr.min.js"></script><link rel="stylesheet" href="/css/toastr.min.css"><script>function switchLanguage(lang) {
  var currentPath = window.location.pathname;
  var newPath;
  if (lang === 'en') {
    newPath = '/en' + currentPath.replace(/^\/(zh-CN\/)?/, '/');
  } else {
    newPath = currentPath.replace(/^\/en/, '');
  }
  window.location.href = newPath;
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><a id="logo" href="/.">Just For Fun</a><div class="lang-select-wrapper"><i class="fas fa-globe"></i><select id="lang-select" onchange="switchLanguage(this.value)"><option value="zh-CN" selected="">中文</option><option value="en">English</option></select></div><p class="description">知其然，知其所以然。知识广度是深度的副产品！</p></div><div id="nav-menu"><a href="/."><i class="fa fa-home"></i><span> 首页</span></a><a href="/archives/"><i class="fa fa-archive"></i><span> 归档</span></a><a href="/aboutme.html"><i class="fa fa-user"></i><span> 关于</span></a><a href="/links.html"><i class="fa fa-user-graduate"></i><span> 小盛律师</span></a><a href="/categories/%E6%B3%95%E5%BE%8B%E6%99%AE%E5%8F%8A/"><i class="fa fa-scale-balanced"></i><span> 法律普及</span></a><a href="/atom.xml"><i class="fa fa-rss"></i><span> 订阅</span></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">C++ 中的未定义行为</h1><div class="post-meta">2016/09/18<span> | </span><span class="category"><a href="/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">程序设计</a></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><a class="disqus-comment-count" data-disqus-identifier="2016/09/18/c++_undefined_behaviours/" href="/2016/09/18/c++_undefined_behaviours/#disqus_thread"></a><div class="post-content"><p>现在我们需要一个程序从控制台读入一个 INT 型整数（输入确保是INT），然后输出其绝对值，你可能闭着眼睛就会写出下面的代码：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    std::cin &gt;&gt; n;</span><br><span class="line">    std::cout &lt;&lt; <span class="built_in">abs</span>(n) &lt;&lt; std::endl;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>等下，好好思考两分钟，然后写几个测试例子跑一下程序。那么你找出程序存在的问题了吗？好了，欢迎走进未定义行为 (Undefined Behavior) 的世界。</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20160918_ub.png/webp" srcset="https://slefboot-1251736664.file.myqcloud.com/20160918_ub.png/webp 1176w, https://slefboot-1251736664.file.myqcloud.com/20160918_ub.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20160918_ub.png/webp800 800w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1176" height="1016"></p>
<span id="more"></span>

<h1 id="什么是未定义行为"><a href="#什么是未定义行为" class="headerlink" title="什么是未定义行为"></a>什么是未定义行为</h1><p>文章一开始的程序中用到了 abs 求绝对值函数，当n为 INT_MIN 时，函数返回什么呢？<a target="_blank" rel="noopener" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3797.pdf">C++ 标准</a>中有这么一条：</p>
<blockquote>
<p>If during the evaluation of an expression, the result is not mathematically defined or not in the range of representable values for its type, the behavior is undefined.</p>
</blockquote>
<p>在一个2进制系统中，当 n 是 INT_MIN 时，<code>int abs(int n)</code> 返回的值超出了 int 的范围，所以这将导致一个未定义行为。很多时候，标准过于精炼，不便于我们快速查找，因此我们可以在 <a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp">cppreference</a> 找到需要的信息，以 abs函数为例，cppreference 明确指出可能导致未定义行为：</p>
<blockquote>
<p>Computes the absolute value of an integer number. The behavior is undefined if the result cannot be represented by the return type.</p>
</blockquote>
<p>那么到底什么是未定义行为呢？简单来说，就是某个操作逻辑上是不合法的，比如越界访问数组等，但是C++ 标准并没有告诉我们遇到这种情况该如何去处理。</p>
<p>我们知道在大部分语言（比如 Python 和 Java）中，一个语句要么按照我们的预期正确执行，要么立即抛出异常。但是在 C++ 中，还有一种情况就是，某条语句并没有按照预期执行（逻辑上已经出错了），但是程序还是可以继续执行（C++标准没有告诉怎么继续执行）。只不过程序的行为已经不可预测了，也就是说程序可能发生运行时错误，也可能给出错误的结果，甚至还可能给出正确的结果。</p>
<p>有一点需要注意的是，对于有的未定义行为，现代编译器有时候可以给出警告，或者是编译失败的提示信息。此外，不同编译器对于未定义行为的处理方式也不同。</p>
<h1 id="常见的未定义行为"><a href="#常见的未定义行为" class="headerlink" title="常见的未定义行为"></a>常见的未定义行为</h1><p>C++ 标准中有大量的未定义行为，如果在标准中查找 <code>undefined behavior</code>，将会看到几十条相关内容。如此众多的未定义行为，无疑给我们带来了许多麻烦，下面我们将列出一些常见的未定义行为，写程序时应该尽量避免。</p>
<p>指针相关的常见未定义行为有如下内容：</p>
<ul>
<li>解引用 nullptr 指针；</li>
<li>解引用一个未初始化的指针；</li>
<li>解引用 new 操作失败返回的指针；</li>
<li>指针访问越界（解引用一个超出数组边界的指针）；</li>
<li>解引用一个指向已销毁对象的指针；</li>
</ul>
<p>解引用一个指向已销毁对象的指针，有时候很容易就会犯这个错误，例如在<a target="_blank" rel="noopener" href="https://github.com/xuelangZF/CS_Offer/blob/master/C%2B%2B/Function.md#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC">函数中返回局部指针地址</a>。 一些简单的错误代码如下：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> * <span class="title">get</span><span class="params">(<span class="type">int</span> tmp)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> &amp;tmp;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="type">int</span> *foo = <span class="built_in">get</span>(<span class="number">10</span>);</span><br><span class="line">    std::cout &lt;&lt; *foo &lt;&lt; std::endl; <span class="comment">// Undefined Behavior;</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> arr[] = {<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>};</span><br><span class="line">    std::cout &lt;&lt; *(arr+<span class="number">4</span>) &lt;&lt; std::endl; <span class="comment">// Undefined Behavior;</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> *bar=<span class="number">0</span>;</span><br><span class="line">    *bar = <span class="number">2</span>;                       <span class="comment">// Undefined Behavior;</span></span><br><span class="line">    std::cout &lt;&lt; *bar &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>其他常见未定义行为如下：</p>
<ul>
<li>有符号整数溢出（文章开头的例子）；</li>
<li>整数做左移操作时，移动的位数为负数；</li>
<li>整数做移位操作时，移动的位数超出整型占的位数。（int64_t i = 1; i &lt;&lt;= 72）；</li>
<li>尝试修改字符串字面值或者常量的内容；</li>
<li>对自动初始化且没有赋初值的变量进行操作；（int i; i++; cout &lt;&lt; i;）</li>
<li>在有返回值的函数结束时不返回内容；</li>
</ul>
<p>更完整的未定义行为列表可以在<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a">这里</a>找到。</p>
<h1 id="为什么存在未定义行为"><a href="#为什么存在未定义行为" class="headerlink" title="为什么存在未定义行为"></a>为什么存在未定义行为</h1><p>C++ 程序经常因为未定义行为而出现各种千奇百怪的 Bug，调试起来也十分困难。相反，其他很多语言中并没有未定义行为，比如 python，当访问 list 越界时会抛出 <code>list index out of range</code>，这些语言中不会因为未定义行为出现各种奇怪的错误。那么为什么 C++ 标准为什么要搞这么多未定义行为呢？</p>
<p>原因是这样可以<strong>简化编译器的工作，有时候还可以产生更加高效的代码</strong>。举个例子来说，如果我们想让解引用指针的操作行为变的明确起来（成功或者抛出异常），就需要在编译期知道指针使用是否合法，那么编译器至少需要做下面这些工作：</p>
<ul>
<li>检查指针是否为 nullptr；</li>
<li>通过某种机制检查指针保存的地址是否合法；</li>
<li>通过某种机制抛出错误</li>
</ul>
<p>这样的话编译器的实现会复杂很多。此外，如果我们有一个循环需要对大量的指针进行操作，那么编译生成的代码就会因为做各种附加检查而导致效率低下。</p>
<p>实际上，很多未定义行为，都是因为程序违反了某一先决条件而导致的，比如赋给指针的地址值必须是可访问的，数组访问时下标在正确的范围内。对 C++来说，语言设计者认为这是程序员（大家都是成年人了）需要保证的内容，语言层面并不会去做相应的检查。</p>
<p>不过，好消息是现在很多编译器已经可以诊断出一些可能导致未定义行为的操作，可以帮我们写出更加健壮的程序。</p>
<h1 id="其他一些行为"><a href="#其他一些行为" class="headerlink" title="其他一些行为"></a>其他一些行为</h1><p>C++ 标准还规定了一些 <strong>Unspecified Behavior</strong>，一个简单的例子（一个大公司曾经的笔试题目）如下：</p>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> i)</span></span>{</span><br><span class="line">    cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> i+<span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Cal</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> a+b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    cout &lt;&lt; <span class="built_in">Cal</span>(<span class="built_in">get</span>(<span class="number">0</span>), <span class="built_in">get</span>(<span class="number">10</span>)) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>程序输出多少？答案是视编译器而定，可能是0 10 12，也可能是 10 0 12。这是因为<strong>函数参数的执行顺序是 Unspecified Behavior</strong>，引用C++标准对 Unspecified Behavior 的说明：</p>
<blockquote>
<p>Unspecified behavior use of an unspecified value, or other behavior where this International Standard provides two or more possibilities and imposes no further requirements on which is chosen in any instance.</p>
</blockquote>
<p>此外，C++标准中还有所谓的 <code>implementation-defined behavior</code>，比如C++标准说需要一个数据类型，然后具体的编译器去选择该类型占用的字节数，或者是存储方式（大端还是小端）。</p>
<p>一般情况下，我们需要关心的只有未定义行为，因为它通常会导致程序出错。而其他的两种行为，不需要我们去关心。</p>
<h1 id="更多阅读"><a href="#更多阅读" class="headerlink" title="更多阅读"></a>更多阅读</h1><p><a target="_blank" rel="noopener" href="http://en.cppreference.com/w/cpp/language/ub">Cppreference：Undefined behavior</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a">What are all the common undefined behaviors that a C++ programmer should know about? </a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/98340/what-are-the-common-undefined-unspecified-behavior-for-c-that-you-run-into">What are the common undefined/unspecified behavior for C that you run into?</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/9566187/function-parameter-evaluation-order">function parameter evaluation order</a><br><a target="_blank" rel="noopener" href="http://blog.regehr.org/archives/213">A Guide to Undefined Behavior in C and C++, Part 1</a><br><a target="_blank" rel="noopener" href="http://blog.regehr.org/archives/213">A Guide to Undefined Behavior in C and C++, Part 2</a><br><a target="_blank" rel="noopener" href="https://www.quora.com/Why-is-there-so-much-undefined-behaviour-in-C++-Wouldnt-it-be-better-if-some-of-them-were-pre-defined-in-the-standard">Why is there so much undefined behavior in C++? </a><br><a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/cstdlib/abs/?kw=abs">Cplusplus: abs</a><br><a target="_blank" rel="noopener" href="http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html">What Every C Programmer Should Know About Undefined Behavior</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points">Undefined behavior and sequence points</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior">Undefined, unspecified and implementation-defined behavior</a><br><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents">Where do I find the current C or C++ standard documents?</a></p>
</div><div class="article-footer-copyright"><p>本文由<b>selfboot</b> 发表于<a href="https://selfboot.cn" target="_blank">个人博客</a>，采用<a href="https://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank">署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议。</a></p><p>本文章已自动同步在<b style="color:red">个人公众号</b>，欢迎去 <a href="https://selfboot.cn/aboutme.html" target="_blank">个人主页 </a> 扫码关注</p><p>非商业转载请注明作者及出处。商业转载请联系<a href="mailto:xuezaigds@gmail.com">作者本人</a></p><p>本文标题为：C++ 中的未定义行为</p><p>本文链接为：https://selfboot.cn/2016/09/18/c++_undefined_behaviours/</p></div><div class="post-donate"><div class="donate_bar center" id="donate_board"><a class="btn_donate" id="btn_donate" href="javascript:;" title="赞助"></a><div class="donate_txt"> ↑<br>内容不错，赞助一下<br></div></div><div class="donate_bar center hidden" id="donate_guide"><img src="https://slefboot-1251736664.file.myqcloud.com/weixin.jpg" title="微信打赏"><img src="https://slefboot-1251736664.file.myqcloud.com/zhifubao.jpg" title="支付宝打赏"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><div class="addthis_sharing_toolbox"></div><div class="tags"><a href="/tags/C/"><i class="fa fa-tag"></i>C++</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://selfboot.cn/2016/09/18/c++_undefined_behaviours/';
    this.page.identifier = '2016/09/18/c++_undefined_behaviours/';
    this.page.title = 'C++ 中的未定义行为';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//xuelangZF.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//xuelangZF.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://xuelangZF.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="https://www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://selfboot.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>分类</span></div><ul><li><a href="/categories/程序设计/">程序设计</a> (23)</li><li><a href="/categories/工具介绍/">工具介绍</a> (13)</li><li><a href="/categories/数据结构与算法/">数据结构与算法</a> (13)</li><li><a href="/categories/计算机基础/">计算机基础</a> (8)</li><li><a href="/categories/社会百态/">社会百态</a> (11)</li><li><a href="/categories/计算机网络/">计算机网络</a> (4)</li><li><a href="/categories/项目实践/">项目实践</a> (10)</li><li><a href="/categories/源码剖析/">源码剖析</a> (17)</li><li><a href="/categories/法律普及/">法律普及</a> (26)</li><li><a href="/categories/金融/">金融</a> (1)</li><li><a href="/categories/人工智能/">人工智能</a> (31)</li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>标签</span></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15.00px;">Python</a> <a href="/tags/方法/" style="font-size: 15.00px;">方法</a> <a href="/tags/教程/" style="font-size: 15.00px;">教程</a> <a href="/tags/Google/" style="font-size: 15.00px;">Google</a> <a href="/tags/总结/" style="font-size: 15.00px;">总结</a> <a href="/tags/思考/" style="font-size: 15.00px;">思考</a> <a href="/tags/前端/" style="font-size: 15.00px;">前端</a> <a href="/tags/Django/" style="font-size: 15.00px;">Django</a> <a href="/tags/DNS/" style="font-size: 15.00px;">DNS</a> <a href="/tags/见闻/" style="font-size: 15.00px;">见闻</a> <a href="/tags/Protocol/" style="font-size: 15.00px;">Protocol</a> <a href="/tags/C/" style="font-size: 15.00px;">C++</a> <a href="/tags/Flask/" style="font-size: 15.00px;">Flask</a> <a href="/tags/Thread/" style="font-size: 15.00px;">Thread</a> <a href="/tags/法律/" style="font-size: 15.00px;">法律</a> <a href="/tags/ChatGPT/" style="font-size: 15.00px;">ChatGPT</a> <a href="/tags/Prompt/" style="font-size: 15.00px;">Prompt</a> <a href="/tags/Plugin/" style="font-size: 15.00px;">Plugin</a> <a href="/tags/Leetcode/" style="font-size: 15.00px;">Leetcode</a> <a href="/tags/Redis/" style="font-size: 15.00px;">Redis</a> <a href="/tags/Debug/" style="font-size: 15.00px;">Debug</a> <a href="/tags/Issue/" style="font-size: 15.00px;">Issue</a> <a href="/tags/eBPF/" style="font-size: 15.00px;">eBPF</a> <a href="/tags/婚姻家庭/" style="font-size: 15.00px;">婚姻家庭</a> <a href="/tags/Go/" style="font-size: 15.00px;">Go</a> <a href="/tags/刑事/" style="font-size: 15.00px;">刑事</a> <a href="/tags/劳动纠纷/" style="font-size: 15.00px;">劳动纠纷</a> <a href="/tags/数学/" style="font-size: 15.00px;">数学</a> <a href="/tags/Gemini/" style="font-size: 15.00px;">Gemini</a> <a href="/tags/google/" style="font-size: 15.00px;">google</a> <a href="/tags/LLM/" style="font-size: 15.00px;">LLM</a> <a href="/tags/LevelDB/" style="font-size: 15.00px;">LevelDB</a></div></div><!-- Debug: page.path = 2016/09/18/c++_undefined_behaviours/ --><div class="widget"><div class="widget-title"><i class="fa fa-file-o"></i><span>最近文章</span></div><ul><li><a href="/2025/01/02/leveldb_source_thread_anno/" title="LevelDB 源码阅读：利用 Clang 的静态线程安全分析">LevelDB 源码阅读：利用 Clang 的静态线程安全分析</a></li><li><a href="/2024/12/25/leveldb_source_hashtable/" title="LevelDB 源码阅读：如何设计一个高性能哈希表">LevelDB 源码阅读：如何设计一个高性能哈希表</a></li><li><a href="/2024/09/24/leveldb_source_skiplist_time_analysis/" title="LevelDB 源码阅读：如何分析跳表的时间复杂度？">LevelDB 源码阅读：如何分析跳表的时间复杂度？</a></li><li><a href="/2024/09/18/leveldb_source_skiplist_test/" title="LevelDB 源码阅读：如何正确测试跳表的并行读写？">LevelDB 源码阅读：如何正确测试跳表的并行读写？</a></li><li><a href="/2024/09/13/gpto1_hands_on/" title="实际例子上手体验 OpenAI o1-preview，比预期差一点？">实际例子上手体验 OpenAI o1-preview，比预期差一点？</a></li><li><a href="/2024/09/09/leveldb_source_skiplist/" title="LevelDB 源码阅读：跳表的原理、实现以及可视化">LevelDB 源码阅读：跳表的原理、实现以及可视化</a></li><li><a href="/2024/09/05/claude35_prompt/" title="Claude3.5 系统提示词解密：不道歉、脸盲、幻觉...">Claude3.5 系统提示词解密：不道歉、脸盲、幻觉...</a></li><li><a href="/2024/08/29/leveldb_source_utils/" title="LevelDB 源码阅读：内存分配器、随机数生成、CRC32、整数编解码">LevelDB 源码阅读：内存分配器、随机数生成、CRC32、整数编解码</a></li><li><a href="/2024/08/14/leveldb_source_wal_log/" title="LevelDB 源码阅读：读写 WAL 日志保证持久性">LevelDB 源码阅读：读写 WAL 日志保证持久性</a></li><li><a href="/2024/08/13/leveldb_source_unstand_c++/" title="LevelDB 源码阅读：理解其中的 C++ 高级技巧">LevelDB 源码阅读：理解其中的 C++ 高级技巧</a></li></ul></div><!-- Debug: Current Language = zh-CN, Filtered Posts Count = 10 --><div class="widget" id="toc"><div class="widget-title"><i class="fa fa-list-ul"></i><span> 文章目录</span></div><ul class="dsq-widget-list"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%A1%8C%E4%B8%BA"><span class="toc-number">1.</span> <span class="toc-text">什么是未定义行为</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%A1%8C%E4%B8%BA"><span class="toc-number">2.</span> <span class="toc-text">常见的未定义行为</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%98%E5%9C%A8%E6%9C%AA%E5%AE%9A%E4%B9%89%E8%A1%8C%E4%B8%BA"><span class="toc-number">3.</span> <span class="toc-text">为什么存在未定义行为</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%B8%80%E4%BA%9B%E8%A1%8C%E4%B8%BA"><span class="toc-number">4.</span> <span class="toc-text">其他一些行为</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E5%A4%9A%E9%98%85%E8%AF%BB"><span class="toc-number">5.</span> <span class="toc-text">更多阅读</span></a></li></ol></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Just For Fun.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/selfboot/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/selfboot"> SelfBoot.</a><p><span id="busuanzi_container_site_pv"></span>本站总访问量 <span id="busuanzi_value_site_pv"></span> 次，<span id="busuanzi_container_site_uv"></span>本站访客数: <span id="busuanzi_value_site_uv"></span> 人次</p></div></div></div><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="stylesheet" type="text/css" href="/css/copyright.css"><a class="show" id="rocket" href="#top" aria-label="Back to top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script><script type="text/javascript" src="/js/jquery.fancybox.min.js" defer=""></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" defer=""></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.min.css"><script type="text/javascript" src="/js/toc.js?v=1.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>