<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="baidu-site-verification" content="codeva-WUJTOV7jES"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="This article details the technical means of optimizing personal blog access speed, including CDN acceleration, WebP format conversion, responsive images, HTTP/2 protocol, etc., and provides specific code implementations and pitfall avoidance guides. These methods can significantly improve page loading speed and enhance user experience. The article also analyzes effect evaluation metrics, providing a reference for building high-performance blogs."><title>Blog Speed Optimization - CDN, Image Compression and HTTP2</title><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml,en/atom.xml"><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;973c5bad683a49b8af76df256779f523&quot;}"></script><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="referrer" content="no-referrer-when-downgrade"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QNFB9JLSPV"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QNFB9JLSPV');
</script><script async="" type="text/javascript" src="/js/clipboard.min.js"></script><script async="" type="text/javascript" src="/js/toastr.min.js"></script><link rel="stylesheet" href="/css/toastr.min.css"><script>function switchLanguage(lang) {
  var currentPath = window.location.pathname;
  var newPath;
  if (lang === 'en') {
    newPath = '/en' + currentPath.replace(/^\/(zh-CN\/)?/, '/');
  } else {
    newPath = currentPath.replace(/^\/en/, '');
  }
  window.location.href = newPath;
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><a id="logo" href="/.">Just For Fun</a><div class="lang-select-wrapper"><i class="fas fa-globe"></i><select id="lang-select" onchange="switchLanguage(this.value)"><option value="zh-CN">中文</option><option value="en" selected="">English</option></select></div><p class="description">Know what it is, and know why it is so. The breadth of knowledge is a byproduct of its depth!</p></div><div id="nav-menu"><a href="/en/."><i class="fa fa-home"></i><span> Home</span></a><a href="/en/archives/"><i class="fa fa-archive"></i><span> Archive</span></a><a href="/en/aboutme.html"><i class="fa fa-user"></i><span> About</span></a><a href="/en/atom.xml"><i class="fa fa-rss"></i><span> RSS</span></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Blog Speed Optimization - CDN, Image Compression and HTTP2</h1><div class="post-meta">2024/01/03<span> | </span><span class="category"><a href="/categories/Programming/">Programming</a></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a class="disqus-comment-count" data-disqus-identifier="en/2024/01/03/hexo_blog_speed/" href="/en/2024/01/03/hexo_blog_speed/#disqus_thread"></a><div class="post-content"><p>I’ve been writing my personal blog for a while now. Previously, I was content as long as it was accessible, without much concern for speed. Recently, when accessing it myself, I felt that the page loading speed was quite slow, significantly affecting the experience. Moreover, slow loading also <strong>affects search engine rankings</strong>. So I set out to perform a series of optimizations on the blog to improve page loading speed. I encountered quite a few pitfalls along the way, which I’ll record in this article, hoping it will be helpful to others.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_insights.png/webp" alt="Personal Blog Web Page Loading Speed Optimization" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_insights.png/webp 2020w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_insights.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_insights.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_insights.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2020" height="1022"></p>
<span id="more"></span>

<p>First, let me explain the overall architecture of my personal blog. The blog is built using <a target="_blank" rel="noopener" href="https://hexo.io/index.html">Hexo</a>. It’s hosted on GitHub, and each time a new markdown article is added, it triggers a Github Action to automatically build and generate static files. These static pages aren’t directly hosted on Github Pages, but instead use <a target="_blank" rel="noopener" href="https://app.netlify.com/">netlify</a>, as netlify provides free CDN acceleration with acceptable latency for both domestic and international access, and deployment is also very simple.</p>
<h2 id="CDN-Acceleration"><a href="#CDN-Acceleration" class="headerlink" title="CDN Acceleration"></a>CDN Acceleration</h2><p>The first step is CDN acceleration, which is the simplest and most effective method for static pages. The HTML files of the blog are directly accelerated by netlify’s built-in CDN, significantly improving access speeds both domestically and internationally. In addition to static HTML files, there are also some page CSS and JS resources, as well as the most bandwidth-consuming image resources.</p>
<h3 id="CSS-and-JS-Files"><a href="#CSS-and-JS-Files" class="headerlink" title="CSS and JS Files"></a>CSS and JS Files</h3><p>For JS and CSS, I also rely on netlify CDN acceleration, just like the blog’s static files. Simply place all these static files in the blog’s theme CSS and JS directories, and then reference them in the blog template.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">link(rel='stylesheet', type='text/css', href=url_for(theme.css) + '/normalize.min.css') </span><br><span class="line">link(rel='stylesheet', type='text/css', href=url_for(theme.css) + '/pure-min.min.css') </span><br><span class="line">link(rel='stylesheet', type='text/css', href=url_for(theme.css) + '/grids-responsive-min.css') </span><br><span class="line">script(type='text/javascript', src=url_for(theme.js) + '/jquery.min.js')</span><br></pre></td></tr></tbody></table></figure>

<p>The advantage of this is that after resolving my blog domain, it will load the HTML files and JS together from the CDN. In the case of HTTP2, these files can be loaded in parallel, improving loading speed. Compared to loading these files from other CDNs, it saves DNS resolution, which theoretically should be faster.</p>
<p>However, for <code>font-awesome</code>, because its CSS file references font files, directly placing it in the theme’s CSS directory would require many font files, which is a bit cumbersome. So I referenced CDN resources here, recommending <a target="_blank" rel="noopener" href="https://cdnjs.cloudflare.com/">cloudflare</a>, a fast CDN from the “network bodhisattva”. It also has very comprehensive versions of various static libraries, which can be directly searched on the website and then referenced.</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css')</span><br></pre></td></tr></tbody></table></figure>

<p>Initially, I placed it on <a target="_blank" rel="noopener" href="https://www.bootcdn.cn/index.html">bootcdn</a>, but after using it for a while, I found that the icons wouldn’t load. Upon checking, it seemed that the <strong>icon font files on the CDN were corrupted</strong>, but it was never fixed, so I abandoned it.</p>
<h3 id="Image-CDN"><a href="#Image-CDN" class="headerlink" title="Image CDN"></a>Image CDN</h3><p>In fact, what affects page loading speed the most are images, so the key point of optimization is images. Here, the images were originally stored on Tencent Cloud COS, and access was directly using COS links. There are several aspects to image optimization. Let’s first look at CDN acceleration, and we’ll expand on image compression and adaptivity later.</p>
<p>Taking Tencent Cloud CDN as an example, enabling CDN for COS storage is quite simple. Before May 9, 2022, it supported default CDN acceleration domains, only requiring simple activation. However, now you can only use custom domains, and if you’re doing domestic acceleration, <strong>the domain needs to be filed</strong>. The configuration is very simple, basically just setting up the accelerated domain and the source station address.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image.png/webp" alt="Tencent Cloud CDN Accelerates COS Storage" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image.png/webp 2392w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2392" height="1730"></p>
<p>After configuring the CDN, you can see real-time request data through Tencent Cloud’s <strong>real-time monitoring</strong>. This includes information on bandwidth, request volume, traffic hit rate, number of requests, request result status codes, etc. Additionally, through <strong>data analysis</strong>, you can see information such as the Top 1000 accessed URLs, number of unique IP accesses, Top 100 Referrers, <strong>distribution of visitor regions</strong>, etc.</p>
<p>The CDN also has a <strong>log service</strong> that provides hourly access log downloads. These contain information such as request time, client IP, accessed domain, file path, byte size, province, ISP, HTTP return code, Referer, request-time (milliseconds), UA, Range, HTTP Method, HTTP protocol identifier, cache Hit/Miss, etc., which can be used for analysis.</p>
<p>What I use quite often is refresh and prefetch. For example, if an image in the blog has already been cached to the CDN, but I’ve changed the image and uploaded it to COS, I can refresh the cache here so that the latest version of the image is in the CDN cache.</p>
<p>Besides Tencent Cloud’s CDN, there are CDNs from various major cloud vendors. Domestic acceleration all requires domain filing, which is a bit troublesome. You can try Cloudflare’s R2 storage combined with CDN acceleration, the free quota should be enough for personal blogs.</p>
<h3 id="CDN-Anti-Scraping"><a href="#CDN-Anti-Scraping" class="headerlink" title="CDN Anti-Scraping"></a>CDN Anti-Scraping</h3><p>After putting blog images on the CDN, due to an article <a target="_blank" rel="noopener" href="http://localhost:4000/2023/12/28/black_hat_SEO/">Looking at the Black Industry’s Search Engine Ranking Optimization Business from Peripheral Traffic Posts</a>, I must have offended someone, so the CDN traffic for my images was scraped, resulting in <strong>my Tencent Cloud account even going into arrears</strong>. Let me explain here, generally CDNs are <strong>billed based on traffic</strong>, and on Tencent Cloud, 100GB domestic traffic usually costs 20 yuan. For personal blogs, the traffic is usually very small, so the CDN cost here is basically negligible. But if someone scrapes the traffic, it will cause the CDN cost to skyrocket. If no protection is in place, scraping is very simple, just continuously sending requests to pull your images.</p>
<p>The image below shows the monitoring of my CDN being scraped. On December 29, 2023, in less than 3 hours, about 200G of traffic was scraped, equivalent to nearly 40 yuan in fees. Of course, the black industry probably still showed some mercy, otherwise they could easily have bankrupted me.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_theft.png/webp" alt="CDN Being Scraped, Generating Large Amount of Traffic in Short Time" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_theft.png/webp 3268w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_theft.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_theft.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_theft.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="3268" height="1670"></p>
<p>Of course, there are some conventional practices to counter CDN traffic scraping. Tencent Cloud’s <a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/228/51813">High-bill Risks from Attacks</a> document introduces it well, mainly three types of methods:</p>
<ol>
<li><strong>Access Control</strong>. There are many types here, such as hotlink protection, mainly to prevent other websites from using your images. IP blacklist and whitelist configuration, find the attacker’s IP and add them all to the blacklist, although professional black industry operators may have many IPs, making it hard to block them all. At this point, configure an IP frequency limit, giving each IP only 10 QPS, which can greatly increase the cost for attackers.</li>
<li><strong>Traffic Management</strong>. A bottom-line solution provided by Tencent Cloud CDN. For example, if traffic reaches 100 MB within 5 minutes, or 10GB per day, it automatically shuts down the CDN to prevent accidentally generating high bills.</li>
<li><strong>Security Protection</strong>. Requires paid purchase, which is a bit overkill for personal blogs, so I haven’t used it yet.</li>
</ol>
<p>The basic principle of countering the black industry here is to <strong>increase the cost for attackers without affecting the normal user experience. At the same time, if it can’t be prevented, try to keep the loss controllable</strong>. Below is part of the security protection for my blog image CDN on Tencent Cloud.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_protection.png/webp" alt="Simple Configuration for CDN Anti-Scraping" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_protection.png/webp 2950w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_protection.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_protection.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_traffic_protection.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2950" height="1778"></p>
<h2 id="Image-Optimization"><a href="#Image-Optimization" class="headerlink" title="Image Optimization"></a>Image Optimization</h2><p>After implementing CDN, I tested with <a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed Insights</a> and found that image loading was quite time-consuming. There are mainly two optimization methods:</p>
<ol>
<li><strong>Optimize image format</strong>, using WebP format. The blog images were previously all PNG, although they were automatically compressed before uploading to COS, they were still quite large. WebP is an excellent modern image format, with <strong>lossless images</strong> 26% smaller compared to PNG.</li>
<li><strong>Responsive images</strong>. This means loading different sized images based on screen size, for example, loading small images for mobile screens and large images for computer screens. This can reduce the loading traffic and improve loading speed.</li>
</ol>
<h3 id="Image-Format-Optimization"><a href="#Image-Format-Optimization" class="headerlink" title="Image Format Optimization"></a>Image Format Optimization</h3><p>The most intuitive method here is to <strong>convert all existing blog images to WebP format</strong>, re-upload them to COS, and then replace the image links in the blog posts. However, while looking at Tencent Cloud’s documentation, I found that COS has an <strong>image processing</strong> function that can complete image format conversion by adding parameters after the image link. For example, if my image address is <code>https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png</code>, just adding <code>/webp</code> at the end of the link will get a much smaller WebP image.</p>
<p>The overall configuration is also very simple. Open the <strong>data processing, image processing</strong> of the COS bucket, then add styles in <strong>image processing styles</strong>. For the format conversion example above, the style description is <code>imageMogr2/format/webp/interlace/1</code>. Tencent Cloud uses CI (Cloud Infinite) image processing, which supports quite a few processes, including image scaling, cropping, rotation, format conversion, watermarking, Gaussian blur, and so on. Here I only used format conversion, you can check the documentation for others.</p>
<p>The image below shows the few conversions I used, where webp is the original image converted to WebP format, and webp400 is converted to an image with a width of 400 pixels, used for display on smaller devices.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_image_webp.png/webp" alt="Tencent Cloud COS Image Processing" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_image_webp.png/webp 3206w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_image_webp.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_image_webp.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_image_webp.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="3206" height="1354"></p>
<p>During the blog writing process, the image links are still normal PNG links, and then when hexo builds static files, use a JS script to batch add styles to the image links in the articles. I also encountered a pitfall here. In the generated webp, some image links returned 404, but the files existed on COS. After contacting customer service and going through several rounds, they finally located the problem. CI decodes the + sign in the URL when parsing the URL. Then customer service, through their own backend, turned off this decode option for my bucket.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image_bug.png/webp" alt="Tencent Cloud COS Image Processing Bug" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image_bug.png/webp 2046w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image_bug.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image_bug.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_cdn_image_bug.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2046" height="1456"></p>
<h3 id="Responsive-Images"><a href="#Responsive-Images" class="headerlink" title="Responsive Images"></a>Responsive Images</h3><p>In the format conversion mentioned earlier, I mentioned that I created multiple styles corresponding to different sizes of WebP images. The next step is to decide which size image to load based on the device’s pixel size. Before processing, I recommend a tool, <a target="_blank" rel="noopener" href="https://ausi.github.io/respimagelint/">RespImageLint</a>, which can check whether the image sizes on the page are reasonable.</p>
<p>After adding this tool to the browser tab, visit an article page on the blog, then click the <code>Lint Images</code> tab, and the tool will simulate devices of various sizes to visit the page and see if the images requested by the browser are reasonable. Finally, it will generate a report listing the check results for each image. As shown below:</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_link_images.png/webp" alt="RespImageLint Checks Responsive Images" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_link_images.png/webp 2372w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_link_images.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_link_images.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_link_images.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2372" height="1488"></p>
<p>Of course, this is the check result after I used responsive images. If you haven’t done responsive images, there would be many warnings. The basic idea of responsive images here is to use CI to provide multiple versions of sizes for each image, and then specify which version of the image to use on devices with different pixels through media queries, viewport size attributes, etc. Specifically in my blog, when hexo renders HTML, use a js script to replace image links, adding srcset and sizes attributes.</p>
<ul>
<li>Set the srcset attribute. The srcset attribute is used to specify different size sources for the image, allowing the browser to choose the appropriate image version based on the device’s screen size and resolution.</li>
<li>Set the sizes attribute. The sizes attribute defines the layout width that the image should use at different viewport widths, allowing the browser to more accurately select the appropriate image from srcset.</li>
<li>Update image attributes, update the src, width, and height attributes of the img tag to ensure proper rendering and proportion of the image.</li>
</ul>
<p>Specifically, create a scripts directory in the root directory of the hexo project, then create an <code>img.js</code> file with the following content:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> imageSize = <span class="built_in">require</span>(<span class="string">"image-size"</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">"after_render:html"</span>, <span class="keyword">function</span> (<span class="params">str, data</span>) {</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(str);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">"img"</span>).<span class="title function_">each</span>(<span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">    <span class="keyword">const</span> img = $(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">const</span> src = img.<span class="title function_">attr</span>(<span class="string">"src"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      src &amp;&amp;</span><br><span class="line">      (src.<span class="title function_">endsWith</span>(<span class="string">".png"</span>) ||</span><br><span class="line">        src.<span class="title function_">endsWith</span>(<span class="string">".jpeg"</span>) ||</span><br><span class="line">        src.<span class="title function_">endsWith</span>(<span class="string">".jpg"</span>) ||</span><br><span class="line">        src.<span class="title function_">endsWith</span>(<span class="string">".gif"</span>) || </span><br><span class="line">        src.<span class="title function_">endsWith</span>(<span class="string">".webp"</span>))</span><br><span class="line">    ) {</span><br><span class="line">      <span class="keyword">const</span> parsedUrl = url.<span class="title function_">parse</span>(src);</span><br><span class="line">      <span class="keyword">const</span> imgPathPart = parsedUrl.<span class="property">path</span>;</span><br><span class="line">      <span class="keyword">const</span> imgPath = path.<span class="title function_">join</span>(__dirname, <span class="string">"../images"</span>, imgPathPart);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Check if file exists</span></span><br><span class="line">      <span class="keyword">if</span> (fs.<span class="title function_">existsSync</span>(imgPath)) {</span><br><span class="line">        <span class="keyword">const</span> dimensions = <span class="title function_">imageSize</span>(imgPath);</span><br><span class="line">        <span class="keyword">const</span> width = dimensions.<span class="property">width</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> small = src + <span class="string">"/webp400"</span>;</span><br><span class="line">        <span class="keyword">const</span> middle = src + <span class="string">"/webp800"</span>;</span><br><span class="line">        <span class="keyword">const</span> large = src + <span class="string">"/webp1600"</span>;</span><br><span class="line">        <span class="keyword">const</span> origin = src + <span class="string">"/webp"</span>;</span><br><span class="line">        <span class="keyword">let</span> srcset = <span class="string">`<span class="subst">${origin}</span> <span class="subst">${width}</span>w`</span>;</span><br><span class="line">        <span class="keyword">if</span> (width &gt; <span class="number">400</span>) srcset += <span class="string">`, <span class="subst">${small}</span> 400w`</span>;</span><br><span class="line">        <span class="keyword">if</span> (width &gt; <span class="number">800</span>) srcset += <span class="string">`, <span class="subst">${middle}</span> 800w`</span>;</span><br><span class="line">        <span class="keyword">if</span> (width &gt; <span class="number">1600</span>) srcset += <span class="string">`, <span class="subst">${large}</span> 1600w`</span>;</span><br><span class="line">        img.<span class="title function_">attr</span>(<span class="string">"srcset"</span>, srcset);</span><br><span class="line">        <span class="keyword">let</span> sizes;</span><br><span class="line">        <span class="keyword">if</span> (width &lt;= <span class="number">400</span>) {</span><br><span class="line">          sizes = <span class="string">`<span class="subst">${width}</span>px`</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          sizes=<span class="string">"(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)"</span></span><br><span class="line">        }</span><br><span class="line">        img.<span class="title function_">attr</span>(<span class="string">"sizes"</span>, sizes);</span><br><span class="line">        img.<span class="title function_">attr</span>(<span class="string">"src"</span>, origin);</span><br><span class="line">        <span class="keyword">const</span> height = dimensions.<span class="property">height</span>;</span><br><span class="line">        img.<span class="title function_">attr</span>(<span class="string">"width"</span>, width);</span><br><span class="line">        img.<span class="title function_">attr</span>(<span class="string">"height"</span>, height);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> $.<span class="title function_">html</span>();</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>Then when hexo renders, it will call this script to process the image attributes. The rendered result is as follows:</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render.png/webp" alt="Result After Rendering Responsive Images" srcset="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render.png/webp 2270w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2270" height="1074"></p>
<p>Then you can <strong>select different screen sizes</strong> in the browser’s developer tools, and look at the Network tab in the requests to see which image version the browser specifically chooses. As shown in the image below, on small sizes it chooses the 400 image, and on medium sizes it’s the 800 image.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render_choice.png/webp" alt="Sizes of Responsive Images Rendered on Different Devices" srcset="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render_choice.png/webp 2802w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render_choice.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render_choice.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_image_render_choice.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2802" height="1760"></p>
<h2 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP 2"></a>HTTP 2</h2><p>The final optimization is to make the requests in the blog use the HTTP2 protocol as much as possible. HTTP2 has made many optimizations and has significant improvements compared to HTTP1.1, which can effectively improve webpage loading speed. For example, it can use a single TCP connection to send multiple data streams at once, ensuring that no resource blocks other resources. The blog’s static resources are hosted on Netlify, which supports http2 by default, but some images and JS scripts inside don’t support http2. In the browser’s console tools, through the network tab, you can see the http2 support status for each resource.</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png/webp" alt="HTTP2 Support Status for Various Resources in the Blog" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png/webp 2856w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2856" height="1774"></p>
<p>The next step is to upgrade the http 1.1 requests to http2. The main focus is actually on images, because images are the bulk of the traffic. After putting the images on CDN, you can enable HTTP2. Taking Tencent Cloud as an example, as shown below:</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2_image.png/webp" alt="Tencent Cloud CDN HTTP2 Configuration" srcset="https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2_image.png/webp 2892w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2_image.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2_image.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240102_hexo_blog_speed_http2_image.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2892" height="1310"></p>
<p>After solving the image issue, only the <strong>Disqus comment system</strong> and <strong>Baidu’s statistics script</strong> are still using http1.1. I looked at Disqus’s official website but didn’t find how to enable http2. However, considering that the comment system is dynamically loaded here and doesn’t affect page loading speed, I’ll leave it for now. Baidu’s <a target="_blank" rel="noopener" href="https://tongji.baidu.com/web/help/article?id=174&amp;type=0">statistics script</a> also doesn’t support http2, but considering that not much traffic comes from Baidu, and Baidu’s statistics are quite poor, I just removed Baidu statistics altogether. Currently, I’ve integrated <a target="_blank" rel="noopener" href="https://analytics.google.com/analytics/web/">Google Analytics</a> and Cloudflare’s <a target="_blank" rel="noopener" href="https://www.cloudflare.com/zh-cn/web-analytics/">Web analytics</a>, both of which support http2 and are sufficient for my needs.</p>
<h2 id="Effect-Evaluation"><a href="#Effect-Evaluation" class="headerlink" title="Effect Evaluation"></a>Effect Evaluation</h2><p>For webpage loading speed evaluation, I mainly used <a target="_blank" rel="noopener" href="https://pagespeed.web.dev/">PageSpeed Insights</a> and Google’s Lighthouse. Generally, several key metrics are used to evaluate webpages:</p>
<ul>
<li>FCP, First Contentful Paint, measures the time from when the user arrives at the webpage to when <strong>the browser renders the first piece of DOM content</strong>. Images, non-white elements, and SVGs on the webpage are all considered DOM content. Generally, anything within 1.8s is acceptable, and Google will consider it as Good.</li>
<li>LCP, Largest Contentful Paint, is used to measure when the largest content element in the viewport is rendered to the screen. This roughly estimates when the main content of the webpage is visible to the user.</li>
<li>FID, First Input Delay, measures the time from when a user first interacts with the webpage (e.g., clicking a link) to when the browser is actually able to begin processing event handler scripts to respond to that interaction.</li>
</ul>
<p>The image below shows the distribution of effects for each metric:</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_web_vitals.png/webp" alt="Web Page Loading Metric Evaluation Effects" srcset="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_web_vitals.png/webp 1544w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_web_vitals.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_web_vitals.png/webp800 800w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1544" height="474"></p>
<p>There are some other metrics, which I won’t expand on here. Google’s Lighthouse provides more detailed optimization suggestions, such as:</p>
<ul>
<li>Reducing the size of CSS and JS;</li>
<li>Removing unused CSS styles;</li>
<li>Minimizing main thread delays</li>
</ul>
<p>However, these optimizations don’t have a very obvious effect on overall improvement and require a considerable amount of time, so I didn’t implement these optimizations in the blog. After optimization, the performance score of this blog is basically above 95 points. However, these metrics are based on your current region. For example, if the CDN speed for image loading is very fast in your country, the evaluation here will certainly be good.</p>
<p>If you’ve used Cloudflare’s Web analytics, you can see the various metrics of actual users visiting the blog, as shown in the image below:</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_real_vitals.png/webp" alt="Cloudflare Web Analytics Real-time Monitoring of Blog Visit Performance" srcset="https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_real_vitals.png/webp 2684w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_real_vitals.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_real_vitals.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20240103_hexo_blog_speed_real_vitals.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2684" height="1764"></p>
<p>Here, 5% of LCP is Poor, mainly due to images in the blog. Some regions have slow network loading for images, and details are provided here, as follows:</p>
<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#layout</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.pure-u-1</span><span class="selector-class">.pure-u-md-3-4</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.content_container</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.post</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.post-content</span>&gt;<span class="selector-tag">p</span>&gt;<span class="selector-tag">a</span><span class="selector-class">.fancybox</span>&gt;<span class="selector-tag">img</span></span><br><span class="line"><span class="selector-tag">slefboot-1251736664</span><span class="selector-class">.file</span><span class="selector-class">.myqcloud</span><span class="selector-class">.com</span>/<span class="number">20230727</span><span class="selector-tag">_chatgpt_hacking_jailbreaking_cover</span><span class="selector-class">.webp</span>/<span class="selector-tag">webp</span></span><br><span class="line"><span class="number">5</span>,<span class="number">485ms</span></span><br><span class="line"><span class="selector-id">#layout</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.pure-u-1</span><span class="selector-class">.pure-u-md-3-4</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.content_container</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.post</span>&gt;<span class="selector-tag">div</span><span class="selector-class">.post-content</span>&gt;<span class="selector-tag">p</span>&gt;<span class="selector-tag">a</span><span class="selector-class">.fancybox</span>&gt;<span class="selector-tag">img</span></span><br><span class="line"><span class="selector-tag">slefboot-1251736664</span><span class="selector-class">.file</span><span class="selector-class">.myqcloud</span><span class="selector-class">.com</span>/<span class="number">20231228</span><span class="selector-tag">_black_hat_SEO_search</span><span class="selector-class">.png</span>/<span class="selector-tag">webp1600</span></span><br><span class="line"><span class="number">8</span>,<span class="number">311ms</span></span><br></pre></td></tr></tbody></table></figure>

<p>This shows that CDN acceleration can’t solve access issues for all regions 100%. Perhaps switching to a better CDN would improve things, but as a personal blog, I haven’t bothered to tinker with it further.</p>
<h2 id="Reference-Documents"><a href="#Reference-Documents" class="headerlink" title="Reference Documents"></a>Reference Documents</h2><p><a target="_blank" rel="noopener" href="https://web.dev/articles/vitals">Web Vitals</a><br><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/lighthouse/performance/render-blocking-resources?hl=en">Eliminate render-blocking resources</a><br><a target="_blank" rel="noopener" href="https://developers.google.com/speed/webp">An image format for the Web</a><br><a target="_blank" rel="noopener" href="https://ausi.github.io/respimagelint/">RespImageLint - Linter for Responsive Images</a><br><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/lighthouse/performance/uses-responsive-images/">Properly size images</a><br><a target="_blank" rel="noopener" href="https://developer.chrome.com/docs/lighthouse/performance/performance-scoring?hl=en">Lighthouse performance scoring</a></p>
</div><div class="article-footer-copyright"><p> Written in Chinese, LLM translated into English</p><p>Non-commercial reproduction is allowed with proper attribution to the author and source. </p><p>For commercial reproduction, please contact the <a href="mailto:xuezaigds@gmail.com">author</a></p></div><div class="post-donate"><div class="donate_bar center" id="donate_board"><a class="btn_donate" id="btn_donate" href="javascript:;" title="Sponsor"></a><div class="donate_txt"> ↑<br>Good content, Sponsor it<br></div></div><div class="donate_bar center hidden" id="donate_guide"><img src="https://slefboot-1251736664.file.myqcloud.com/weixin.jpg" title="WeChat Sponsor"><img src="https://slefboot-1251736664.file.myqcloud.com/zhifubao.jpg" title="Alipay Sponsor"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><div class="addthis_sharing_toolbox"></div><div class="tags"><a href="/tags/Frontend/"><i class="fa fa-tag"></i>Frontend</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://selfboot.cn/en/2024/01/03/hexo_blog_speed/';
    this.page.identifier = 'en/2024/01/03/hexo_blog_speed/';
    this.page.title = 'Blog Speed Optimization - CDN, Image Compression and HTTP2';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//xuelangZF.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//xuelangZF.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://xuelangZF.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="https://www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://selfboot.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>Categories</span></div><ul><li><a href="/en/categories/Programming/">Programming</a> (18)</li><li><a href="/en/categories/Source-Code-Analysis/">Source Code Analysis</a> (12)</li><li><a href="/en/categories/Artificial-Intelligence/">Artificial Intelligence</a> (13)</li><li><a href="/en/categories/Discovery/">Discovery</a> (1)</li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>Tags</span></div><div class="tagcloud"><a href="/en/tags/Python/" style="font-size: 15.00px;">Python</a> <a href="/en/tags/Google/" style="font-size: 15.00px;">Google</a> <a href="/en/tags/C/" style="font-size: 15.00px;">C++</a> <a href="/en/tags/ChatGPT/" style="font-size: 15.00px;">ChatGPT</a> <a href="/en/tags/Prompt/" style="font-size: 15.00px;">Prompt</a> <a href="/en/tags/Redis/" style="font-size: 15.00px;">Redis</a> <a href="/en/tags/Debug/" style="font-size: 15.00px;">Debug</a> <a href="/en/tags/eBPF/" style="font-size: 15.00px;">eBPF</a> <a href="/en/tags/Go/" style="font-size: 15.00px;">Go</a> <a href="/en/tags/Frontend/" style="font-size: 15.00px;">Frontend</a> <a href="/en/tags/Gemini/" style="font-size: 15.00px;">Gemini</a> <a href="/en/tags/SEO/" style="font-size: 15.00px;">SEO</a> <a href="/en/tags/LLM/" style="font-size: 15.00px;">LLM</a> <a href="/en/tags/Web/" style="font-size: 15.00px;">Web</a> <a href="/en/tags/LevelDB/" style="font-size: 15.00px;">LevelDB</a></div></div><!-- Debug: page.path = en/2024/01/03/hexo_blog_speed/ --><div class="widget"><div class="widget-title"><i class="fa fa-file-o"></i><span>Recent</span></div><ul><li><a href="/2024/09/18/leveldb-source-skiplist-test-en/" title="LevelDB Explained - How to Test Parallel Read and Write of SkipLists?">LevelDB Explained - How to Test Parallel Read and Write of SkipLists?</a></li><li><a href="/en/2024/09/13/gpto1_hands_on/" title="Hands-on with OpenAI's o1-preview - Not Better Enough?">Hands-on with OpenAI's o1-preview - Not Better Enough?</a></li><li><a href="/en/2024/09/09/leveldb_source_skiplist/" title="LevelDB Explained - How to implement SkipList">LevelDB Explained - How to implement SkipList</a></li><li><a href="/en/2024/09/05/claude35_prompt/" title="Claude3.5's System Prompts - No Apologies, Face Blind, Hallucinate...">Claude3.5's System Prompts - No Apologies, Face Blind, Hallucinate...</a></li><li><a href="/en/2024/08/29/leveldb_source_utils/" title="LevelDB Explained - Arena, Random, CRC32, and More.">LevelDB Explained - Arena, Random, CRC32, and More.</a></li><li><a href="/en/2024/08/14/leveldb_source_wal_log/" title="LevelDB Explained - How To Read and Write WAL Logs">LevelDB Explained - How To Read and Write WAL Logs</a></li><li><a href="/en/2024/08/13/leveldb_source_unstand_c++/" title="LevelDB Explained -  Understanding Advanced C++ Techniques">LevelDB Explained -  Understanding Advanced C++ Techniques</a></li><li><a href="/en/2024/08/08/leveldb_source_bloom_filter/" title="LevelDB Explained - Bloom Filter Implementation and Visualization">LevelDB Explained - Bloom Filter Implementation and Visualization</a></li><li><a href="/en/2024/08/06/leveldb_source_prepare/" title="LevelDB Explained - Preparing the Development Environment">LevelDB Explained - Preparing the Development Environment</a></li><li><a href="/en/2024/08/02/leveldb_source_env_posixfile/" title="LevelDB Explained - Posix File Operation Details">LevelDB Explained - Posix File Operation Details</a></li></ul></div><!-- Debug: Current Language = en, Filtered Posts Count = 10 --><div class="widget" id="toc"><div class="widget-title"><i class="fa fa-list-ul"></i><span> Contents</span></div><ul class="dsq-widget-list"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CDN-Acceleration"><span class="toc-number">1.</span> <span class="toc-text">CDN Acceleration</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS-and-JS-Files"><span class="toc-number">1.1.</span> <span class="toc-text">CSS and JS Files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-CDN"><span class="toc-number">1.2.</span> <span class="toc-text">Image CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CDN-Anti-Scraping"><span class="toc-number">1.3.</span> <span class="toc-text">CDN Anti-Scraping</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Image-Optimization"><span class="toc-number">2.</span> <span class="toc-text">Image Optimization</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Image-Format-Optimization"><span class="toc-number">2.1.</span> <span class="toc-text">Image Format Optimization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Responsive-Images"><span class="toc-number">2.2.</span> <span class="toc-text">Responsive Images</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP-2"><span class="toc-number">3.</span> <span class="toc-text">HTTP 2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Effect-Evaluation"><span class="toc-number">4.</span> <span class="toc-text">Effect Evaluation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference-Documents"><span class="toc-number">5.</span> <span class="toc-text">Reference Documents</span></a></li></ol></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Just For Fun.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/selfboot/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/selfboot"> SelfBoot.</a><p><span id="busuanzi_container_site_pv"></span>Total Site Visits:  <span id="busuanzi_value_site_pv"></span> Times，<span id="busuanzi_container_site_uv"></span>Unique Visitors:  <span id="busuanzi_value_site_uv"></span> People</p></div></div></div><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="stylesheet" type="text/css" href="/css/copyright.css"><a class="show" id="rocket" href="#top" aria-label="Back to top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script><script type="text/javascript" src="/js/jquery.fancybox.min.js" defer=""></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" defer=""></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.min.css"><script type="text/javascript" src="/js/toc.js?v=1.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>