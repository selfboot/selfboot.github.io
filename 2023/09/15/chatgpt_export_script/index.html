<!DOCTYPE html><html lang="[&quot;zh-CN&quot;,&quot;en&quot;,&quot;default&quot;]"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="baidu-site-verification" content="codeva-WUJTOV7jES"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="本文记录作为后端开发，在 ChatGPT 指导下从零开发浏览器油猴脚本的过程。涵盖了油猴脚本工作原理、调试前端样式、捕捉 DOM 变化、添加交互等技巧。成功实现了在 ChatGPT 页面抓取Latex 数学公式文本的功能。分享了利用 ChatGPT 学习新技能、提升解决问题能力的独特经历。"><title>ChatGPT 老师教我写前端：从零写油猴脚本</title><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml,en/atom.xml"><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;973c5bad683a49b8af76df256779f523&quot;}"></script><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="referrer" content="no-referrer-when-downgrade"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QNFB9JLSPV"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QNFB9JLSPV');
</script><script async="" type="text/javascript" src="/js/clipboard.min.js"></script><script async="" type="text/javascript" src="/js/toastr.min.js"></script><link rel="stylesheet" href="/css/toastr.min.css"><script>function switchLanguage(lang) {
  var currentPath = window.location.pathname;
  var newPath;
  if (lang === 'en') {
    newPath = '/en' + currentPath.replace(/^\/(zh-CN\/)?/, '/');
  } else {
    newPath = currentPath.replace(/^\/en/, '');
  }
  window.location.href = newPath;
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ChatGPT 老师教我写前端：从零写油猴脚本</h1><a id="logo" href="/.">Just For Fun</a><div class="lang-select-wrapper"><i class="fas fa-globe"></i><select id="lang-select" onchange="switchLanguage(this.value)"><option value="zh-CN" selected="">中文</option><option value="en">English</option></select></div><p class="description">知其然，知其所以然。知识广度是深度的副产品！</p></div><div id="nav-menu"><a href="/."><i class="fa fa-home"></i><span> 首页</span></a><a href="/archives/"><i class="fa fa-archive"></i><span> 归档</span></a><a href="/aboutme.html"><i class="fa fa-user"></i><span> 关于</span></a><a href="/links.html"><i class="fa fa-user-graduate"></i><span> 小盛律师</span></a><a href="/categories/%E6%B3%95%E5%BE%8B%E6%99%AE%E5%8F%8A/"><i class="fa fa-scale-balanced"></i><span> 法律普及</span></a><a href="/atom.xml"><i class="fa fa-rss"></i><span> 订阅</span></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ChatGPT 老师教我写前端：从零写油猴脚本</h1><div class="post-meta">2023/09/15<span> | </span><span class="category"><a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/">项目实践</a></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><a class="disqus-comment-count" data-disqus-identifier="2023/09/15/chatgpt_export_script/" href="/2023/09/15/chatgpt_export_script/#disqus_thread"></a><div class="post-content"><p>可以跟着 ChatGPT 老师学前端？听起来有点不可思议，毕竟前端很多和 UI 有关，和没有<strong>多模态能力</strong>的 ChatGPT 沟通前端，想想都有点难。不过最近在 ChatGPT 的帮助下，很快就写了一个<a target="_blank" rel="noopener" href="https://greasyfork.org/en/scripts/475169-chatgpt-export">油猴插件</a>，能够在 ChatGPT 的聊天界面上，复制数学公式的 Latex 文本。</p>
<p>作为一个后台开发，前端零基础，要写一个油猴插件，如果没有 ChatGPT，首先得去找文档看，写一个雏形都要花很多时间。如果中间遇到了问题，还得自己去找答案，这个过程可能会很漫长，可能中途就放弃了。但是有了 ChatGPT 老师，遇到问题直接提问，整个开发体验就好了太好了。</p>
<p>再次感叹下，ChatGPT 真的是极大<strong>拓宽个人的技术能力边界，极大提高个人解决问题的能力！</strong></p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_copy.png/webp" alt="ChatGPT export 插件" srcset="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_copy.png/webp 1764w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_copy.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_copy.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_copy.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1764" height="1248"></p>
<span id="more"></span>

<h2 id="油猴脚本背景"><a href="#油猴脚本背景" class="headerlink" title="油猴脚本背景"></a>油猴脚本背景</h2><p>刚好最近看的一本书提到了<strong>向量内积</strong>，就在 ChatGPT 上深入了解了下这里的<a href="https://selfboot.cn/2023/09/14/chatgpt_math_product/">数学知识</a>。然后想把聊天页面这里的公式复制到 markdown 笔记中去，发现直接复制内容不太可行。</p>
<p>打开浏览器的开发者工具，看到在 html 中其实有公式的 Latex 文本表示，复制后可以在 <a target="_blank" rel="noopener" href="https://www.mathjax.org/#demo">mathjax</a> 查看转换后的公式：</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_mathjax.png/webp" alt="数学公式在线预览" srcset="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_mathjax.png/webp 2470w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_mathjax.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_mathjax.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_mathjax.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2470" height="1602"></p>
<p>不过总不能每次要复制一个公式，就去开发者工具里面复制吧。于是想着可以写一个油猴脚本，能够在公式旁边放一个复制按钮，点击后就能把 Latex 公式复制出来。</p>
<h2 id="第一个版本"><a href="#第一个版本" class="headerlink" title="第一个版本"></a>第一个版本</h2><p>之前没搞过油猴脚本，不过不担心，直接问 ChatGPT 老师：</p>
<blockquote>
<p>我想写一个油猴脚本，在 chat.openai.com 页面中，对于公式，可以在右边提供一个复制按钮，复制公式的文本内容。比如下面的 html：<br>…<br>…<br>复制 annotation encoding=”application/x-tex” 里面的内容</p>
</blockquote>
<p>很快一个简单的雏形脚本就出来了，不过安装脚本后，没看到复制按钮。就去追问 ChatGPT 老师，结果告诉我对于动态加载的内容，上面脚本依赖的 <code>window.load</code> 事件可能不会完全起作用。因为在 window.load 触发时，这些动态元素可能还没有加载。在这种情况下，一个更可靠的方法是使用 <code>MutationObserver</code> 来监听 DOM 变化。当新的 <strong>.math</strong> 元素被添加到 DOM 时，MutationObserver 将触发，然后可以相应地添加复制按钮。</p>
<p>然后给了新的脚本逻辑，定义了一个 addCopyButtons 函数，该函数执行与之前相同的任务：查找所有 .math 元素并添加复制按钮。然后，使用 MutationObserver 来监视页面上所有新添加或删除的节点。每当 DOM 发生变化时，addCopyButtons 函数都会被调用，从而确保所有新的 .math 元素也会获得复制按钮。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Initial adding</span></span><br><span class="line"><span class="title function_">addCopyButtons</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Observe for new formulas</span></span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"DOM has changed, rechecking..."</span>);</span><br><span class="line">  <span class="title function_">addCopyButtons</span>();</span><br><span class="line">});</span><br><span class="line">observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, { <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> });</span><br></pre></td></tr></tbody></table></figure>

<p>用这个脚本后，<strong>打开页面直接卡死</strong>了，看来脚本有某种形式的无限循环或者过度的资源消耗。然后直接把当前代码全部给 ChatGPT，让他帮忙排查卡死的原因，找到了 3 个可能导致性能问题的地方：</p>
<ol>
<li>MutationObserver 触发过于频繁: 如果页面的 DOM 频繁地变化，MutationObserver 可能会触发很多次，导致 addCopyButtons 函数也被频繁地调用。</li>
<li>复杂的 DOM 查询: document.querySelectorAll 和 div.querySelector 可能在复杂的 DOM 结构中变得相对缓慢。</li>
<li>事件监听器积累: 每次 addCopyButtons 被调用时，你都会给新创建的按钮添加一个点击事件监听器。如果这个函数被多次调用，同一个元素可能会绑定多个相同的事件监听器。</li>
</ol>
<p>接着让它修改上面的脚本，增加了一个简单的防抖（debounce）机制来限制 MutationObserver 触发的频率，另外避免重复添加相同的事件监听器。修改部分主要如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) {</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">addCopyButtons</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">      <span class="keyword">const</span> mathDivs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">'.math, .math-inline, .math-display'</span>);</span><br><span class="line">        mathDivs.<span class="title function_">forEach</span>(<span class="function"><span class="params">div</span> =&gt;</span> {</span><br><span class="line">          <span class="keyword">if</span> (div.<span class="title function_">getAttribute</span>(<span class="string">'data-copy-button-added'</span>) === <span class="string">'true'</span>) <span class="keyword">return</span>;</span><br><span class="line">          div.<span class="title function_">setAttribute</span>(<span class="string">'data-copy-button-added'</span>, <span class="string">'true'</span>);</span><br><span class="line">          ...</span><br><span class="line">      }</span><br><span class="line">    ...</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">debounceAddCopyButtons</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">        <span class="built_in">clearTimeout</span>(debounceTimer);</span><br><span class="line">        debounceTimer = <span class="built_in">setTimeout</span>(addCopyButtons, <span class="number">300</span>);</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="title function_">addCopyButtons</span>();  <span class="comment">// Run once initially</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"DOM has changed, rechecking..."</span>);</span><br><span class="line">        <span class="title function_">debounceAddCopyButtons</span>();</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, { <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> });</span><br><span class="line">})();    </span><br></pre></td></tr></tbody></table></figure>

<p>到这里插件基本能工作了，但是复制按钮的样式和 ChatGPT 自带的复制按钮不一样，而且复制成功后没有提示。为了追求完美，这里接续优化。</p>
<h2 id="复刻前端样式"><a href="#复刻前端样式" class="headerlink" title="复刻前端样式"></a>复刻前端样式</h2><p>对于一个前端零基础的后台开发来说，根本不知道怎么调这些 CSS 样式。这里我想要在每个公式后面的复制按钮，能够和 ChatGPT 自己的复制按钮保持完全一致。在浏览器的开发者工具里，直接复制图标的 SVG 标签过来：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">stroke</span>=<span class="string">"currentColor"</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 24 24"</span> <span class="attr">stroke-linecap</span>=<span class="string">"round"</span></span></span><br><span class="line"><span class="tag"><span class="attr">stroke-linejoin</span>=<span class="string">"round"</span> <span class="attr">class</span>=<span class="string">"icon-sm"</span> <span class="attr">height</span>=<span class="string">"1em"</span> <span class="attr">width</span>=<span class="string">"1em"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"8"</span> <span class="attr">y</span>=<span class="string">"2"</span> <span class="attr">width</span>=<span class="string">"8"</span> <span class="attr">height</span>=<span class="string">"4"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>发现确实有图标，但是<strong>样式不太对，颜色和鼠标停留上去都没效果</strong>，更不用说暗黑模式下的颜色适配了。之前从 GPT 那里学到过，这里样式一般是通过 tag 的 class 来设定的，刚好看到 svg 标签外层有一个 button，里面有很多 class，于是把这个 button 以及它的 class 也都复制过来，样式基本就一致了。</p>
<p>为了了解某个 class 各自到底负责什么样式，之前都是在开发者工具去掉之后看效果对比，不过有了 ChatGPT 还可以直接问它了：</p>
<blockquote>
<p>帮我解释下这里每个 class 负责什么样式：<br>class=”flex ml-auto gap-2 rounded-md p-1 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200 disabled:dark:hover:text-gray-400”</p>
</blockquote>
<p>于是学到了下面的解释，这里使用的是 <code>Tailwind CSS</code> 的类名，每个都对应某种特定的样式：</p>
<ul>
<li>flex: 使元素使用 Flexbox 布局。</li>
<li>ml-auto: 设置左外边距（margin-left）为自动，通常用于将元素推到容器的右边。</li>
<li>gap-2: 设置 Flex 或 Grid 布局中的元素之间的间距。</li>
<li>rounded-md: 设置元素的边角为中等大小的圆角。</li>
<li>p-1: 设置元素的内边距（padding）。</li>
</ul>
<p>悬停（Hover）状态</p>
<ul>
<li>hover:bg-gray-100: 当鼠标悬停在元素上时，设置背景色为浅灰色。</li>
<li>hover:text-gray-700: 当鼠标悬停在元素上时，设置文本颜色为深灰色。</li>
</ul>
<p>暗黑模式（Dark mode）</p>
<ul>
<li>dark:text-gray-400: 在暗黑模式下，设置文本颜色为中灰色。</li>
<li>dark:hover:bg-gray-700: 在暗黑模式下，鼠标悬停时设置背景颜色为更深的灰色。</li>
<li>dark:hover:text-gray-200: 在暗黑模式下，鼠标悬停时设置文本颜色为浅灰色。</li>
</ul>
<p>暗黑模式 + 禁用（Disabled）状态</p>
<ul>
<li>disabled:dark:hover:text-gray-400: 在暗黑模式下，如果元素被禁用，鼠标悬停时设置文本颜色为中灰色。</li>
</ul>
<p>这些类名各自负责一个很小但明确的样式设置，这是 Tailwind CSS 的工作方式。通过组合这些类名，可以非常灵活地构建复杂的样式。通过上面的设置，复制按钮和原生的已经保持一致了。<strong>美中不足的是，点原生的复制按钮，复制成功后，图标会变成一个对号，然后又变回去了，目前脚本里的还做不到</strong>。</p>
<h2 id="捕捉动态内容"><a href="#捕捉动态内容" class="headerlink" title="捕捉动态内容"></a>捕捉动态内容</h2><p>为了追求完美的效果，我想在油猴脚本里实现同样的点击效果。这里首先得知道 ChatGPT 的复制成功对号提示是什么图形。于是问了下：</p>
<blockquote>
<p>有个svg 的 button，点击后会变成另一个 svg，但是很快就变回去了。我想看下中间变到的 svg，这里要怎么做？</p>
</blockquote>
<p>ChatGPT 给了几个思路：</p>
<ol>
<li>当 SVG 改变时，开发者工具通常会高亮显示改变的部分，可以在此时快速复制 SVG 的代码。</li>
<li>在控制台使用 JavaScript 来暂停 SVG 的变化。如果 SVG 的变化是由某个函数触发的，可以重写该函数以阻止其执行原本的任务。</li>
<li>找到触发 SVG 变化的 JavaScript 代码，在相应的行设置断点。当代码执行到该行时，它会暂停，允许查看此时的 SVG 状态。</li>
<li>如果 SVG 是通过网络请求获得的，可以在 Netword 找到对应的请求。然后在“Response”（或“响应”）部分看到 SVG 数据。</li>
</ol>
<p>前面几个方法都不太可行，第 1 个方法，没来的及复制就变回去了。第 2、3 个方法，我不知道怎么找到触发 SVG 变化的 JavaScript 代码。第 4 个方法，因为这里没触发网络请求，所以不适用。</p>
<p>其实断点这个方法看起来最实用，因为直接看 Script 的代码找触发 SVG 变化的部分有难度，ChatGPT 推荐用浏览器开发者工具的”Event Listeners”（事件监听器）功能来查找这个按钮的点击事件。但是我看了 button 元素的 Click 事件，通过事件找到的 JS 代码也不太对。不要慌，继续追问 ChatGPT 老师：</p>
<blockquote>
<p>我找不到这里是哪个事件监听，有没有更方便的方法。</p>
</blockquote>
<p>ChatGPT 又给我推荐了 3 种方法：</p>
<p>1、使用 JavaScript 在 Console（控制台）中手动增加这里 button 或 svg 的点击事件，输出点击 button 后变化的内容。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">'.text-gray-400'</span>).<span class="title function_">addEventListener</span>(<span class="string">'click'</span>, <span class="keyword">function</span>(<span class="params">e</span>) {</span><br><span class="line"><span class="keyword">if</span> (e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">'button'</span>)) {  <span class="comment">// 检查点击的是否是 button 或其子元素</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {  <span class="comment">// 设置一个短暂的延迟以捕获可能的变化</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">'.text-gray-400'</span>).<span class="property">innerHTML</span>);  <span class="comment">// 输出变化后的内容</span></span><br><span class="line">    }, <span class="number">100</span>);  <span class="comment">// 延迟 100 毫秒，可以根据实际情况调整</span></span><br><span class="line">}</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<p>但是尝试了几次，这里都没有任何输出。</p>
<p>2、在 “Elements”（元素）面板中找到这个 svg 元素。右键点击这个元素，在出现的菜单中选择 “Break on” -&gt; “attribute modifications”。这样当该元素的属性发生变化时，代码会自动暂停，让你有机会查看或者拷贝当前的 SVG 代码。同样试了几个 tag 下的 Break on，都没有在正确的时机暂停过。</p>
<p>3、使用 <code>MutationObserver</code>。这是一个更高级的方案，通过 MutationObserver API 可以监听 DOM 的变更，包括元素的添加和删除。</p>
<p>正是这第三个方法，让我成功拿到了变化后的图标内容。这里提示词也很简单，如下：</p>
<blockquote>
<p>这里使用了 MutationObserver，我能在页面发生 dom 变化的时候，就直接输出变化的那一小块吗?</p>
</blockquote>
<p>于是拿到了下面的这个 JS 代码(ChatGPT 还贴心的给了注释)：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个观察器实例并传入回调函数</span></span><br><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="keyword">function</span>(<span class="params">mutations</span>) {</span><br><span class="line">  mutations.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">mutation</span>) {</span><br><span class="line">    <span class="comment">// 检查是否有子节点被添加或删除</span></span><br><span class="line">    <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">'childList'</span>) {</span><br><span class="line">      <span class="comment">// 如果有子节点被添加</span></span><br><span class="line">      <span class="keyword">if</span> (mutation.<span class="property">addedNodes</span>.<span class="property">length</span> &gt; <span class="number">0</span>) {</span><br><span class="line">        mutation.<span class="property">addedNodes</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">node</span>) {</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'Added node:'</span>, node);</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">      <span class="comment">// 如果有子节点被删除</span></span><br><span class="line">      <span class="keyword">if</span> (mutation.<span class="property">removedNodes</span>.<span class="property">length</span> &gt; <span class="number">0</span>) {</span><br><span class="line">        mutation.<span class="property">removedNodes</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">node</span>) {</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'Removed node:'</span>, node);</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 检查是否有属性变化</span></span><br><span class="line">    <span class="keyword">if</span> (mutation.<span class="property">type</span> === <span class="string">'attributes'</span>) {</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'Attributes changed:'</span>, mutation.<span class="property">target</span>);</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置观察选项</span></span><br><span class="line"><span class="keyword">const</span> config = { <span class="attr">attributes</span>: <span class="literal">true</span>, <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> };</span><br><span class="line"><span class="comment">// 在目标节点上开始观察</span></span><br><span class="line">observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, config);</span><br></pre></td></tr></tbody></table></figure>

<p>把这段代码复制并粘贴到浏览器的开发者工具的控制台中运行，然后点击复制，就可以看到输出的内容了，如下图：</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_dom_change.png/webp" alt="控制台观察到了这里的 Button 变化" srcset="https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_dom_change.png/webp 2828w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_dom_change.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_dom_change.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230913_chatgpt_export_script_dom_change.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2828" height="766"></p>
<p>这里看到 ChatGPT 的对号 HTML 内容如下：</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"flex ml-auto gap-2 rounded-md p-1 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200 disabled:dark:hover:text-gray-400"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span></span></span><br><span class="line"><span class="tag">        <span class="attr">stroke</span>=<span class="string">"currentColor"</span> <span class="attr">fill</span>=<span class="string">"none"</span> <span class="attr">stroke-width</span>=<span class="string">"2"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 24 24"</span> <span class="attr">stroke-linecap</span>=<span class="string">"round"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">stroke-linejoin</span>=<span class="string">"round"</span> <span class="attr">class</span>=<span class="string">"icon-sm"</span> <span class="attr">height</span>=<span class="string">"1em"</span> <span class="attr">width</span>=<span class="string">"1em"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">"20 6 9 17 4 12"</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>有了这个 svg 图标，就好办了，剩下的是点击的时候用这个图标替换原来的。先把这个 html 定义为 copiedButton，然后让 ChatGPT 添加点击事件的代码。 </p>
<h2 id="设置复制动作"><a href="#设置复制动作" class="headerlink" title="设置复制动作"></a>设置复制动作</h2><p>这里提问的时候，需要把<strong>目前版本的脚本带上去</strong>，这点很重要，因为这样它就会在当前的代码上下文做改动。提示词如下：</p>
<blockquote>
<p>我想给下面的油猴脚本增加一个动作：</p>
<p>// ==UserScript==<br>// @name         chatgpt-export<br>…<br>…(省略掉)<br>点击 copy ，复制成功公式后，这里 copyButton 变成 copiedButton，过 2s 后自动再复原。</p>
</blockquote>
<p>ChatGPT 给出了详细的方法，可以在 click 事件监听器内部进行操作，先将 copyButton 的 innerHTML 改为 copiedButton，然后使用 setTimeout 在2秒后再改回 copyButton。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...省略其他代码</span></span><br><span class="line">copyButton.<span class="title function_">addEventListener</span>(<span class="string">'click'</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">    navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(latexText).<span class="title function_">then</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'复制成功！'</span>);</span><br><span class="line">        <span class="comment">// 复制成功后，更改按钮为 'copiedButton'</span></span><br><span class="line">        copyButton.<span class="property">innerHTML</span> = copiedButton;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2秒后复原按钮</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span><br><span class="line">            copyButton.<span class="property">innerHTML</span> = copyButton;</span><br><span class="line">        }, <span class="number">2000</span>);</span><br><span class="line">    }).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">'复制失败:'</span>, err);</span><br><span class="line">    });</span><br><span class="line">});</span><br><span class="line"><span class="comment">// ...省略其他代码</span></span><br></pre></td></tr></tbody></table></figure>

<p>这里还温馨提示<strong>发现我代码里有一个问题</strong>：在创建 copyButton 时，你再次用了一个<strong>同名的局部变量</strong>。这会导致原始的 copyButton（存储按钮 HTML 的那个）被覆盖。为了避免这个问题，你应该给用于存储 HTML 的 copyButton 变量和用于创建实际 DOM 元素的 copyButton 变量使用不同的名字。</p>
<p>不过<strong>我没注意到这个问题</strong>，改了后发现 button 没了，变成了 [object HTMLSpanElement]。再次提问 ChatGPT，才知道 copyButton 是一个 HTMLSpanElement 对象，将其设置为自己的 innerHTML 会导致其变成字符串 “[object HTMLSpanElement]”。解决这个问题的方法是使用不同的变量名存储 HTML 内容和 DOM 元素。这样，就可以在需要的时候分别引用它们。关键代码如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copyButtonHtml = <span class="string">`&lt;button **** &lt;/button&gt;`</span> <span class="comment">// 这里名字由 copyButton 改为 copyButtonHtml</span></span><br><span class="line"><span class="keyword">const</span> copyButton = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">'span'</span>);</span><br><span class="line">copyButton.<span class="property">innerHTML</span> = copyButtonHtml;</span><br></pre></td></tr></tbody></table></figure>

<p>至此这里复制功能就完成了。最后就是发布脚本了，发布的流程自己也不清楚，同样在 ChatGPT 的帮助下，把脚本上传到 Greasy Fork 上，最后奉上油猴脚本地址：<a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN/scripts/475169-chatgpt-export">chatgpt-export</a>。</p>
<p>装了脚本后，在有数学公式的聊天界面里，对于行内公式和块级公式，在旁边都会多一个复制按钮，点击后就可以复制公式，复制后会短暂显示一个对号，整体效果和官方原生的复制按钮一样。</p>
<h2 id="意外的结尾"><a href="#意外的结尾" class="headerlink" title="意外的结尾"></a>意外的结尾</h2><p>发布完插件，再来体验的时候，忽然发现官方<strong>自带的复制功能</strong>，就可以导出当前聊天会话的 markdown 内容，也包括了公式里的 latex 文本，所以这个脚本<strong>多少有点鸡肋</strong>。不过这个过程，还是学到了很多前端的知识，对 ChatGPT 的能力也有了更深的认识，还是很值得的。</p>
<p>也欢迎大家试试这个脚本，毕竟可以只复制一个公式，而不是整段内容～</p>
</div><div class="article-footer-copyright"><p>本文由<b>selfboot</b> 发表于<a href="https://selfboot.cn" target="_blank">个人博客</a>，采用<a href="https://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank">署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议。</a></p><p>本文章已自动同步在<b style="color:red">个人公众号</b>，欢迎去 <a href="https://selfboot.cn/aboutme.html" target="_blank">个人主页 </a> 扫码关注</p><p>非商业转载请注明作者及出处。商业转载请联系<a href="mailto:xuezaigds@gmail.com">作者本人</a></p><p>本文标题为：ChatGPT 老师教我写前端：从零写油猴脚本</p><p>本文链接为：https://selfboot.cn/2023/09/15/chatgpt_export_script/</p></div><div class="post-donate"><div class="donate_bar center" id="donate_board"><a class="btn_donate" id="btn_donate" href="javascript:;" title="赞助"></a><div class="donate_txt"> ↑<br>内容不错，赞助一下<br></div></div><div class="donate_bar center hidden" id="donate_guide"><img src="https://slefboot-1251736664.file.myqcloud.com/weixin.jpg" title="微信打赏"><img src="https://slefboot-1251736664.file.myqcloud.com/zhifubao.jpg" title="支付宝打赏"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><div class="addthis_sharing_toolbox"></div><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/"><i class="fa fa-tag"></i>前端</a><a href="/tags/ChatGPT/"><i class="fa fa-tag"></i>ChatGPT</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://selfboot.cn/2023/09/15/chatgpt_export_script/';
    this.page.identifier = '2023/09/15/chatgpt_export_script/';
    this.page.title = 'ChatGPT 老师教我写前端：从零写油猴脚本';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//xuelangZF.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//xuelangZF.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://xuelangZF.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="https://www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://selfboot.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>分类</span></div><ul><li><a href="/categories/程序设计/">程序设计</a> (23)</li><li><a href="/categories/工具介绍/">工具介绍</a> (13)</li><li><a href="/categories/数据结构与算法/">数据结构与算法</a> (13)</li><li><a href="/categories/计算机基础/">计算机基础</a> (8)</li><li><a href="/categories/社会百态/">社会百态</a> (11)</li><li><a href="/categories/计算机网络/">计算机网络</a> (4)</li><li><a href="/categories/项目实践/">项目实践</a> (10)</li><li><a href="/categories/源码剖析/">源码剖析</a> (11)</li><li><a href="/categories/法律普及/">法律普及</a> (26)</li><li><a href="/categories/金融/">金融</a> (1)</li><li><a href="/categories/人工智能/">人工智能</a> (29)</li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"></i><span>标签</span></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15.00px;">Python</a> <a href="/tags/教程/" style="font-size: 15.00px;">教程</a> <a href="/tags/总结/" style="font-size: 15.00px;">总结</a> <a href="/tags/方法/" style="font-size: 15.00px;">方法</a> <a href="/tags/Google/" style="font-size: 15.00px;">Google</a> <a href="/tags/思考/" style="font-size: 15.00px;">思考</a> <a href="/tags/前端/" style="font-size: 15.00px;">前端</a> <a href="/tags/Django/" style="font-size: 15.00px;">Django</a> <a href="/tags/DNS/" style="font-size: 15.00px;">DNS</a> <a href="/tags/见闻/" style="font-size: 15.00px;">见闻</a> <a href="/tags/Protocol/" style="font-size: 15.00px;">Protocol</a> <a href="/tags/C/" style="font-size: 15.00px;">C++</a> <a href="/tags/Flask/" style="font-size: 15.00px;">Flask</a> <a href="/tags/Thread/" style="font-size: 15.00px;">Thread</a> <a href="/tags/法律/" style="font-size: 15.00px;">法律</a> <a href="/tags/ChatGPT/" style="font-size: 15.00px;">ChatGPT</a> <a href="/tags/Prompt/" style="font-size: 15.00px;">Prompt</a> <a href="/tags/Plugin/" style="font-size: 15.00px;">Plugin</a> <a href="/tags/Leetcode/" style="font-size: 15.00px;">Leetcode</a> <a href="/tags/Redis/" style="font-size: 15.00px;">Redis</a> <a href="/tags/Debug/" style="font-size: 15.00px;">Debug</a> <a href="/tags/Issue/" style="font-size: 15.00px;">Issue</a> <a href="/tags/eBPF/" style="font-size: 15.00px;">eBPF</a> <a href="/tags/婚姻家庭/" style="font-size: 15.00px;">婚姻家庭</a> <a href="/tags/Go/" style="font-size: 15.00px;">Go</a> <a href="/tags/刑事/" style="font-size: 15.00px;">刑事</a> <a href="/tags/劳动纠纷/" style="font-size: 15.00px;">劳动纠纷</a> <a href="/tags/数学/" style="font-size: 15.00px;">数学</a> <a href="/tags/Gemini/" style="font-size: 15.00px;">Gemini</a> <a href="/tags/google/" style="font-size: 15.00px;">google</a> <a href="/tags/LLM/" style="font-size: 15.00px;">LLM</a> <a href="/tags/LevelDB/" style="font-size: 15.00px;">LevelDB</a></div></div><!-- Debug: page.path = 2023/09/15/chatgpt_export_script/ --><div class="widget"><div class="widget-title"><i class="fa fa-file-o"></i><span>最近文章</span></div><ul><li><a href="/2024/08/14/leveldb_source_wal_log/" title="LevelDB 源码阅读：读写 WAL 日志保证持久性">LevelDB 源码阅读：读写 WAL 日志保证持久性</a></li><li><a href="/2024/08/13/leveldb_source_unstand_c++/" title="LevelDB 源码阅读：理解其中的 C++ 高级技巧">LevelDB 源码阅读：理解其中的 C++ 高级技巧</a></li><li><a href="/2024/08/08/leveldb_source_bloom_filter/" title="LevelDB 源码阅读：布隆过滤器原理、实现、测试与可视化">LevelDB 源码阅读：布隆过滤器原理、实现、测试与可视化</a></li><li><a href="/2024/08/06/leveldb_source_prepare/" title="LevelDB 源码阅读：准备开发环境">LevelDB 源码阅读：准备开发环境</a></li><li><a href="/2024/08/02/leveldb_source_env_posixfile/" title="LevelDB 源码阅读：Posix 文件操作接口实现细节">LevelDB 源码阅读：Posix 文件操作接口实现细节</a></li><li><a href="/2024/07/22/leveldb_source_nodestructor/" title="LevelDB 源码阅读：禁止对象被析构">LevelDB 源码阅读：禁止对象被析构</a></li><li><a href="/2024/06/22/claude35_artifacts/" title="免费版 Claude3.5 配合 Artifacts，一句话就能写个游戏">免费版 Claude3.5 配合 Artifacts，一句话就能写个游戏</a></li><li><a href="/2024/06/13/async_pool_block_problem/" title="溢出、异常、线程池、阻塞，奇怪的服务重启问题定位">溢出、异常、线程池、阻塞，奇怪的服务重启问题定位</a></li><li><a href="/2024/05/19/stream_sse_chunk/" title="结合实例理解流式输出的几种实现方法">结合实例理解流式输出的几种实现方法</a></li><li><a href="/2024/05/10/c++_object_model/" title="结合实例深入理解 C++ 对象的内存布局">结合实例深入理解 C++ 对象的内存布局</a></li></ul></div><!-- Debug: Current Language = zh-CN, Filtered Posts Count = 10 --><div class="widget" id="toc"><div class="widget-title"><i class="fa fa-list-ul"></i><span> 文章目录</span></div><ul class="dsq-widget-list"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%E8%83%8C%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">油猴脚本背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">第一个版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%BB%E5%89%8D%E7%AB%AF%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">复刻前端样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%95%E6%8D%89%E5%8A%A8%E6%80%81%E5%86%85%E5%AE%B9"><span class="toc-number">4.</span> <span class="toc-text">捕捉动态内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%A4%8D%E5%88%B6%E5%8A%A8%E4%BD%9C"><span class="toc-number">5.</span> <span class="toc-text">设置复制动作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%84%8F%E5%A4%96%E7%9A%84%E7%BB%93%E5%B0%BE"><span class="toc-number">6.</span> <span class="toc-text">意外的结尾</span></a></li></ol></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Just For Fun.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/selfboot/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/selfboot"> SelfBoot.</a><p><span id="busuanzi_container_site_pv"></span>本站总访问量 <span id="busuanzi_value_site_pv"></span> 次，<span id="busuanzi_container_site_uv"></span>本站访客数: <span id="busuanzi_value_site_uv"></span> 人次</p></div></div></div><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="stylesheet" type="text/css" href="/css/copyright.css"><a class="show" id="rocket" href="#top" aria-label="Back to top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script><script type="text/javascript" src="/js/jquery.fancybox.min.js" defer=""></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" defer=""></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.min.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async=""></script><script type="text/javascript" src="/js/toc.js?v=1.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>