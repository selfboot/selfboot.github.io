<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="baidu-site-verification" content="codeva-WUJTOV7jES"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="文章归纳了 ChatGPT 在日常使用中的各类错误回答，如时区设置、法律案例、代码实现、图像识别等都曾出现过失误，虽然它看似智能，但仍存在局限。这些实例提示我们注意验证AI输出，而不是盲目依赖。合理使用ChatGPT，认识其优劣，才能发挥其价值。我们不应因其偶尔的失误否定AI，而应客观理性地对待当前AI水平。"><title>真实例子告诉你 ChatGPT 是多会胡编乱造！</title><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script defer="" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;973c5bad683a49b8af76df256779f523&quot;}"></script><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="referrer" content="no-referrer-when-downgrade"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QNFB9JLSPV"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QNFB9JLSPV');
</script><script async="" type="text/javascript" src="/js/clipboard.min.js"></script><script async="" type="text/javascript" src="/js/toastr.min.js"></script><link rel="stylesheet" href="/css/toastr.min.css"><meta name="generator" content="Hexo 7.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">真实例子告诉你 ChatGPT 是多会胡编乱造！</h1><a id="logo" href="/.">Just For Fun</a><p class="description">知其然，知其所以然。知识广度是深度的副产品！</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/aboutme.html"><i class="fa fa-user"> 关于</i></a><a href="/links.html"><i class="fa fa-user-graduate"> 小盛律师</i></a><a href="/categories/%E6%B3%95%E5%BE%8B%E6%99%AE%E5%8F%8A/"><i class="fa fa-scale-balanced"> 法律普及</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">真实例子告诉你 ChatGPT 是多会胡编乱造！</h1><div class="post-meta">2023/08/23<span> | </span><span class="category"><a href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><a class="disqus-comment-count" data-disqus-identifier="2023/08/23/not-smart-chatgpt/" href="/2023/08/23/not-smart-chatgpt/#disqus_thread"></a><div class="post-content"><p>GPT-4，这一人工智能的杰出代表，已经在许多方面超越了普通人类。我的日常也原来越离不开 ChatGPT 了，它大大提高了日常的工作效率。然而，在使用中发现 ChatGPT 还是有时会犯一些“幼稚”的错误，就像一个正在成长的孩子偶尔会出现的调皮行为。</p>
<p>本文记录<strong>日常使用</strong> ChatGPT 过程中发现的一些错误回答，就像记录孩子成长过程中的出丑时刻一样。等到有一天 AI “长大成人”，也能一起回顾这些“小时候”的出丑时刻。</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230817_not_smart_chatgpt_robot.png/webp" alt="ChatGPT 的错误回答集锦" srcset="https://slefboot-1251736664.file.myqcloud.com/20230817_not_smart_chatgpt_robot.png/webp 1280w, https://slefboot-1251736664.file.myqcloud.com/20230817_not_smart_chatgpt_robot.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230817_not_smart_chatgpt_robot.png/webp800 800w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1280" height="720"></p>
<span id="more"></span>

<p>本文的记录均基于 OpenAI 的 GPT 模型，如果没做特殊说明，都是最新的 GPT4 模型。本文会在个人博客<strong>持续更新</strong>，记录日常使用中发现的各种好玩儿的回答。</p>
<h2 id="pytz-的北京时区"><a href="#pytz-的北京时区" class="headerlink" title="pytz 的北京时区"></a>pytz 的北京时区</h2><p>背景是这样的，在 <code>postgres</code> 中存储了几个 <code>timestamp with time zone</code> 类型的时间戳，存储的时候，都是按照 utc 时区存储。在读的时候，想转换成北京时区，然后渲染到邮件中去。开始问的时候，不小心问成了转成上海时区，提示词如下：</p>
<blockquote>
<p>如果我想对数据库返回的时间，按照上海时区转换后，再渲染到邮件 html 中，要怎么做？</p>
</blockquote>
<p>ChatGPT 表现的很不错，直接告诉可以使用 Python 的 <code>pytz</code> 库来处理时区转换。以下是如何将 UTC 时间转换为上海时区的步骤：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> report_data:</span><br><span class="line">    item.createtime = item.createtime.astimezone(shanghai_tz)</span><br><span class="line">    item.updatetime = item.updatetime.astimezone(shanghai_tz)</span><br><span class="line">    item.publishtime = item.publishtime.astimezone(shanghai_tz) <span class="keyword">if</span> item.publishtime <span class="keyword">else</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p>其实我还是想转北京时区，于是多嘴问了一句：</p>
<blockquote>
<p>如何转成北京时区呢？</p>
</blockquote>
<p> ChatGPT 回答可以定义北京时区，因为北京和上海都在同一时区。可以使用 <code>'Asia/Shanghai'</code> 或 <code>'Asia/Beijing'</code> 来定义北京时区。以下是<strong>如何使用 ‘Asia/Beijing’ 来定义北京时区的代码</strong>：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> report_data:</span><br><span class="line">    item.createtime = item.createtime.astimezone(beijing_tz)</span><br><span class="line">    item.updatetime = item.updatetime.astimezone(beijing_tz)</span><br><span class="line">    item.publishtime = item.publishtime.astimezone(beijing_tz) <span class="keyword">if</span> item.publishtime <span class="keyword">else</span> <span class="literal">None</span></span><br></pre></td></tr></tbody></table></figure>

<p>我也按照 ChatGPT 的建议，乖乖改了时区。结果遇到了报错，只好把这个错误贴给 ChatGPT，这下 ChatGPT 就意识到错误了。</p>
<blockquote>
<p>pytz.exceptions.UnknownTimeZoneError: ‘Asia/Beijing’</p>
</blockquote>
<p>虽然北京是中国的首都，但在时区数据库中，<strong>中国的时区通常以上海来表示</strong>。所以你应该使用 ‘Asia/Shanghai’ 而不是 ‘Asia/Beijing’。再次验证了使用 ChatGPT 的黄金哲学：<strong>一定要验证 AI 的回答</strong>。</p>
<h2 id="房东不退押金？"><a href="#房东不退押金？" class="headerlink" title="房东不退押金？"></a>房东不退押金？</h2><p>我知道 ChatGPT 会有幻觉，不过没想到<strong>这个幻觉竟然能必现</strong>。事情是这样的，有好多咨询问题，我想帮<a href="https://selfboot.cn/links">小盛律师</a>做一个简单的分类筛选，找出里面有用的信息。于是写了一个脚本，用 ChatGPT 来执行一些分类和摘要总结的任务，结果发现对于某些内容为空的记录，ChatGPT 给我一个很奇怪的分类和汇总。</p>
<p>我的提示词是这样的：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">你是一个中国的专业律师，熟悉民法典和其他现行中国法律。</span><br><span class="line">现在你的任务是对用户咨询的问题进行归类、总结，并尝试回答。</span><br><span class="line">你需要输出一个 json，包括下面字段:</span><br><span class="line"></span><br><span class="line">"isneedlawer": true/false， # 用户是否需要律师的帮忙</span><br><span class="line">"customreplycontent": ""， # 针对问题给出的一个法律建议，如果无法律建议，则为空字符串，</span><br><span class="line">"cityzone": ""， # 问题涉及的地点，精确到城市即可，比如广州市。如何没有地点信息，则为空字符串，</span><br><span class="line">"abstract": "" # 问题的简单概述，不超过 200 字，要包含用户主要传达的信息"</span><br><span class="line"></span><br><span class="line">输出一定要是 json，如果做不到，那么请输出一个空的 json。</span><br><span class="line">用户咨询的内容如下:</span><br><span class="line">{seperator}{question}{seperator}</span><br></pre></td></tr></tbody></table></figure>

<p>其中 <code>seperator</code> 是分隔符，<code>question</code> 则是从其他地方读到的咨询内容。如果咨询内容不为空，则一切符合预期，但是一旦咨询内容为空，ChatGPT 就会返回一个很奇怪的结果，如下图：</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt.png/webp" alt="ChatGPT 幻觉：房东不退押金" srcset="https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt.png/webp 2402w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="2402" height="1136"></p>
<p>难道广州的房东经常不退租客押金，被 ChatGPT 都从网上学到了？有点让人啼笑皆非了。不止在 ChatGPT3.5 下会有这个问题，最新的 GPT4 模型，也是会有同样的问题。</p>
<h2 id="不能激活的插件"><a href="#不能激活的插件" class="headerlink" title="不能激活的插件"></a>不能激活的插件</h2><p>OpenAI 的 ChatGPT 是离线训练的模型，里面会缺少一些比较新的知识。<a target="_blank" rel="noopener" href="https://python.langchain.com/docs/get_started/introduction.html">Langchain</a> 是一个最近刚出来的 LLM 开发框架，ChatGPT 没有其相关知识。为了能够让它回答 langchain 的问题，我开了 Webpolit 插件，并且提供给他文档地址，然后提问如下：</p>
<blockquote>
<p>参考 <a target="_blank" rel="noopener" href="https://python.langchain.com/docs/get_started/quickstart">https://python.langchain.com/docs/get_started/quickstart</a> 这里 langchain 的文档，帮我给指定中文文本分类，提取下面信息，并输出 json。</p>
<p>cityzone：提取文本里有提到的位置信息<br>customreplycontent：生成一段回复</p>
</blockquote>
<p>然后 GPT4 就自信的说，根据文档和需求，可以用下面的脚本来完成任务。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain <span class="keyword">import</span> Langchain</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 Langchain 实例</span></span><br><span class="line">lc = Langchain()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义分析文本的函数</span></span><br><span class="line"><span class="meta">@lc.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">analyze_text</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    cityzone = 提取位置信息(text)</span><br><span class="line">    customreplycontent = 生成一段回复(text)</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        <span class="string">"cityzone"</span>: cityzone，</span><br><span class="line">        <span class="string">"customreplycontent"</span>: customreplycontent</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义提取位置信息的函数</span></span><br><span class="line"><span class="meta">@lc.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">提取位置信息</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="comment"># 这里添加你的逻辑来提取位置信息</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"上海"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></tbody></table></figure>

<p>这个大聪明怎么忽然这么笨啦？<code>提取位置信息(text)</code> 这都能拿出来作为 python 代码，也太敷衍了。就这还大言不惭，让我通过安装 Langchain 库并运行上述代码来测试这个脚本。没办法，只好提醒他用插件重新读文档来实现，终于变聪明了。</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt_webpolit.png/webp" alt="用插件学习后的 ChatGPT" srcset="https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt_webpolit.png/webp 1652w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt_webpolit.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt_webpolit.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230821_not_smart_chatgpt_webpolit.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1652" height="1446"></p>
<h2 id="图像识别错误"><a href="#图像识别错误" class="headerlink" title="图像识别错误"></a>图像识别错误</h2><p>有一个图片，我用红色标记了其中一部分，然后想把这部分替换为其他图片。自己不熟悉 opencv 的代码，也不太懂图片处理，想着让 ChatGPT 的 <a href="https://selfboot.cn/2023/07/12/gpt4_code_interpreter_image/">Code Interpreter</a> 帮我写个简单的代码来处理一下。于是给它传了图片，然后提问：</p>
<blockquote>
<p>如何用 python 识别这个图片里红色方框的坐标位置，并且把里面的内容替换为其他内容</p>
</blockquote>
<p>ChatGPT 给出了自己的步骤，看起来是很合理：</p>
<ol>
<li>读取图像。</li>
<li>识别红色方框的坐标位置。</li>
<li>截取该区域并替换为所需内容。</li>
<li>将替换的内容粘贴回原始图像。</li>
</ol>
<p>然后就是第一步，识别红色方框的坐标位置。信誓旦旦说成功识别了红色方框的坐标位置，它位于图像的 (562，474) 位置，并具有 142 的宽度和 172 的高度。还好心好意地用<strong>蓝色方框</strong>在图片上标记了出来，如下图：</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_cv.png/webp" alt="图像识别错误的 ChatGPT" srcset="https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_cv.png/webp 1266w, https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_cv.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_cv.png/webp800 800w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1266" height="628"></p>
<p>把图像中的脸部识别成了红色方框部分，看了下代码，应该是颜色的阈值没设置对导致的。后面把任务拆分了下，让它只识别红色方框位置，同时把方框的红色搞得稍微粗了些，ChatGPT 就能正常识别了。</p>
<h2 id="画不出来的链表图"><a href="#画不出来的链表图" class="headerlink" title="画不出来的链表图"></a>画不出来的链表图</h2><p>之前读《Redis 设计与实现》这本书的时候，看到作者说配图全部是用 <a target="_blank" rel="noopener" href="http://graphviz.org/">Graphviz</a> 生成的，还给出了所有配图的源码 <a target="_blank" rel="noopener" href="https://github.com/huangz1990/redisbook1e-gallery">redisbook1e-gallery</a>。当时就觉得用源码生成图片也太酷了，还打开 Graphviz 的官网看了下，奈何文档看起来太多了，上手需要点时间，就搁置了。</p>
<p>最近刚好想用 Graphviz 画一个简单的图，想着让 ChatGPT 生成源码，岂不快哉？动动嘴图片就出来了，这多好。于是就提问如下：</p>
<blockquote>
<p>你是一个 Graphviz 绘图的专家，帮我用 markdown 输出下面描述中的图片的制作代码，要求绘的图简单清晰，结构工整。</p>
<p>图片描述：有一个int 的链表，里面从头往尾部元素值分别是 1 ，2，3，… ，100，其中有一个箭头指向头部，箭头上有文字 head，有一个带有标题 tail 的箭头指向链表尾部。</p>
</blockquote>
<p>ChatGPT 果然会！给出了一个不错的源码，还好心好意提醒我可以将此代码粘贴到一个 Graphviz 编辑器（例如 <a target="_blank" rel="noopener" href="http://www.webgraphviz.com/">WebGraphviz</a>）中，然后生成链表的图像。</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">digraph LinkedList {</span><br><span class="line">    rankdir=LR;</span><br><span class="line">    node [shape=record];</span><br><span class="line">    </span><br><span class="line">    // 定义头部和尾部标签</span><br><span class="line">    head [label="head"， shape=plaintext];</span><br><span class="line">    tail [label="tail"， shape=plaintext];</span><br><span class="line">    </span><br><span class="line">    // 定义链表节点</span><br><span class="line">    node1 [label="{ 1 | &lt;p1&gt; }"];</span><br><span class="line">    node2 [label="{ 2 | &lt;p2&gt; }"];</span><br><span class="line">    node3 [label="{ 3 | &lt;p3&gt; }"];</span><br><span class="line">    ellipsis [label="..."， shape=plaintext];</span><br><span class="line">    node100 [label="{ 100 | }"];</span><br><span class="line">    </span><br><span class="line">    // 定义箭头和连接</span><br><span class="line">    head -&gt; node1 [dir=back， constraint=false];</span><br><span class="line">    node1:p1 -&gt; node2;</span><br><span class="line">    node2:p2 -&gt; node3;</span><br><span class="line">    node3:p3 -&gt; ellipsis;</span><br><span class="line">    ellipsis -&gt; node100;</span><br><span class="line">    tail -&gt; node100 [dir=back， constraint=false];</span><br><span class="line">    </span><br><span class="line">    // 定义排列</span><br><span class="line">    { rank=same; head tail }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>于是我就拿源码贴过去，发现语法都有错误，生成的图片也不对。head 和 tail 画不对，还多了个 svg 出来，如下图了：</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_graphviz.png/webp" alt="画不出一个简单链表 digraph 的 ChatGPT" srcset="https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_graphviz.png/webp 1706w, https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_graphviz.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_graphviz.png/webp800 800w, https://slefboot-1251736664.file.myqcloud.com/20230822_not_smart_chatgpt_graphviz.png/webp1600 1600w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1706" height="674"></p>
<p>然后试着换了各种更加清晰的提示词，ChatGPT 总是给不出正确的源码，给的许多源码也都有语法错误。难道数据集中没有很多Graphviz 绘图的语料，导致 ChatGPT 没有学会？</p>
<h2 id="代码解释器库缺失"><a href="#代码解释器库缺失" class="headerlink" title="代码解释器库缺失"></a>代码解释器库缺失</h2><p>ChatGPT 的 <a href="https://selfboot.cn/2023/07/10/gpt4_code_interpreter_data/">Code Interpreter</a> 还是很好用的，不用自己写代码就能用来分析数据，并进行可视化。有次使用过程中，需要对数据中的<strong>中文内容进行分词</strong>，想到了 <a target="_blank" rel="noopener" href="https://github.com/fxsjy/jieba">jieba 分词</a>，但是怕 ChatGPT 的代码解释器环境没有安装这个包，于是就问了下 ChatGPT：</p>
<blockquote>
<p>你可以用一些中文分词库，比如 jieba 吗？</p>
</blockquote>
<p>ChatGPT 就自信回答当然可以使用 jieba 分词库来更准确地分析中文文本，还说这个库能够更好地识别中文词汇和短语。然后就开始刷刷刷写代码了：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="comment"># Using jieba to tokenize the consultation texts</span></span><br><span class="line">jieba_words = jieba.cut(consultation_texts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Counting the frequency of each word using jieba tokenization</span></span><br><span class="line">jieba_word_counts = Counter(jieba_words)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Finding and returning the top 50 most common words using jieba tokenization</span></span><br><span class="line">top_50_jieba_words = [word <span class="keyword">for</span> word, _ <span class="keyword">in</span> jieba_word_counts.most_common(<span class="number">50</span>) <span class="keyword">if</span> word.strip() <span class="keyword">and</span> word <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">'.,;:!?。，；：！？'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Returning the top 50 words with jieba</span></span><br><span class="line">top_50_jieba_words</span><br></pre></td></tr></tbody></table></figure>

<p>然后 ChatGPT 就开始运行代码，果不其然，发现没有安装 jieba 这个库 <code>No module named 'jieba'</code>。然后终于意识到当前环境中没有安装 jieba 分词库，所以无法直接使用。</p>
<p><img src="https://slefboot-1251736664.file.myqcloud.com/20230825_not_smart_chatgpt_jieba.png/webp" alt="Code interpreter 加载 jieba 库失败" srcset="https://slefboot-1251736664.file.myqcloud.com/20230825_not_smart_chatgpt_jieba.png/webp 1388w, https://slefboot-1251736664.file.myqcloud.com/20230825_not_smart_chatgpt_jieba.png/webp400 400w, https://slefboot-1251736664.file.myqcloud.com/20230825_not_smart_chatgpt_jieba.png/webp800 800w" sizes="(min-width: 1150px) 723px, (min-width: 48em) calc((100vw - 120px) * 3 / 4 - 50px), (min-width: 35.5em) calc((100vw - 75px), calc(100vw - 40px)" width="1388" height="510"></p>
<p>这个例子其实 AI 的表现也是可以理解的，毕竟这种错误人也经常犯，经常是代码跑一般才发现没有安装某个库。不过 AI 还是可以表现的更好些，可以在跑失败的时候，告诉我怎么<strong>手动在当前环境安装这个库</strong>。毕竟，你都知道我想用这个库，而你也有方法安装这个库，那为啥不告诉我呢？看来还是不够聪明呀～</p>
<h2 id="Clickhouse-函数"><a href="#Clickhouse-函数" class="headerlink" title="Clickhouse 函数"></a>Clickhouse 函数</h2><p>背景是这样的，我想用 Clickhouse 写一个查询语句，将一个按照位存储的 field 字段，转换成数组出来。每一位(从低位到高位)分别对应:</p>
<table>
<thead>
<tr>
<th>位</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>CN</td>
</tr>
<tr>
<td>1</td>
<td>EN</td>
</tr>
<tr>
<td>2</td>
<td>HK</td>
</tr>
<tr>
<td>3</td>
<td>JA</td>
</tr>
</tbody></table>
<p>对于数字 13 (1101)，我想转换为 <code>[CN, HK, JA]</code>，提示词如下：</p>
<blockquote>
<p>clickhsoue 里，我查找到了一个 field 字段，是个二进制按位记录的 flag 位，如果转换为一个数组？</p>
<p>&amp; 1 = 1 , CN<br>&amp; 2 = 1 , EN</p>
</blockquote>
<p>然后让我这样操作：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arrayJoin(arrayFilter(x <span class="operator">-</span><span class="operator">&gt;</span> x <span class="operator">!=</span> <span class="string">''</span>, [if(field <span class="operator">&amp;</span> <span class="number">1</span>, <span class="string">'CN'</span>, <span class="string">''</span>), if(field <span class="operator">&amp;</span> <span class="number">2</span>, <span class="string">'EN'</span>, <span class="string">''</span>)])) <span class="keyword">AS</span> CombinedFlags</span><br></pre></td></tr></tbody></table></figure>

<p>我就开心的拿去测了下，发现不对，最简化一个测试 sql: <code>select 5&amp;1</code>，发现也报错了，于是直接提示：</p>
<blockquote>
<p>select 5&amp;1<br>Error running query: Code: 62, e.displayText() = DB::Exception: Syntax error: failed at position 335 (‘&amp;’) (line 5, col 9): &amp;1 FORMAT JSON. Unrecognized token: ‘&amp;’ (version 21.8.12.1)</p>
</blockquote>
<p>然后 ChatGPT 就认错了，说疏忽了 ClickHouse 的 SQL 语法细节。在 ClickHouse 中，你需要使用 <code>bitAnd</code> 函数来进行按位与运算。例如，要检查数字 5 的第 1 位是否为 1，可以这样写：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> bitAnd(<span class="number">5</span>, <span class="number">1</span>) <span class="keyword">AS</span> <span class="keyword">Result</span></span><br></pre></td></tr></tbody></table></figure>

<p>我就又拿来试，发现还是不对。想了下，这里不是求与，应该是测试某一位是否是 1，然后把是 1 的全部拼接起来。<strong>不再靠 ChatGPT 了，直接去查官方文档</strong>，发现了函数 bitTest，这个可以测试某一位是否是 1。最后写了下面的 SQL(可以用 13 替换 field 来测试):</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> arrayFilter(x <span class="operator">-</span><span class="operator">&gt;</span> x <span class="operator">!=</span> <span class="string">''</span>, [if(bitTest(field, <span class="number">0</span>)<span class="operator">=</span><span class="number">1</span>, <span class="string">'CN'</span>, <span class="string">''</span>), </span><br><span class="line">    if(bitTest(field, <span class="number">1</span>)<span class="operator">=</span><span class="number">1</span>, <span class="string">'EN'</span>, <span class="string">''</span>),</span><br><span class="line">    if(bitTest(field, <span class="number">2</span>)<span class="operator">=</span><span class="number">1</span>, <span class="string">'HK'</span>, <span class="string">''</span>),</span><br><span class="line">    if(bitTest(field, <span class="number">3</span>)<span class="operator">=</span><span class="number">1</span>, <span class="string">'JA'</span>, <span class="string">''</span>)]) <span class="keyword">AS</span> combine</span><br></pre></td></tr></tbody></table></figure>

<hr>
<p>通过这些日常真实案例，我们可以看到当前 ChatGPT 在回答一些问题时，仍会胡编乱造一些<strong>看起来很正确</strong>的答案。但是我们不应因此否定 ChatGPT 的价值，更不应该弃之不用。<strong>认识到其局限并合理使用</strong>，才是我们应有的态度。</p>
</div><div class="article-footer-copyright"><p>本文由<b>selfboot</b> 发表于<a href="https://selfboot.cn" target="_blank">个人博客</a>，采用<a href="https://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank">署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议。</a></p><p>本文章已自动同步在<b style="color:red">个人公众号</b>，欢迎去 <a href="https://selfboot.cn/aboutme.html" target="_blank">个人主页 </a> 扫码关注</p><p>非商业转载请注明作者及出处。商业转载请联系<a href="mailto:xuezaigds@gmail.com">作者本人</a></p><p>本文标题为：真实例子告诉你 ChatGPT 是多会胡编乱造！</p><p>本文链接为：https://selfboot.cn/2023/08/23/not-smart-chatgpt/</p></div><div class="post-donate"><div class="donate_bar center" id="donate_board"><a class="btn_donate" id="btn_donate" href="javascript:;" title="打赏"></a><div class="donate_txt"> ↑<br>内容不错，打赏你啦<br></div></div><div class="donate_bar center hidden" id="donate_guide"><img src="https://slefboot-1251736664.file.myqcloud.com/weixin.jpg" title="微信打赏"><img src="https://slefboot-1251736664.file.myqcloud.com/zhifubao.jpg" title="支付宝打赏"></div><script type="text/javascript">document.getElementById('btn_donate').onclick = function(){
    $('#donate_board').addClass('hidden');
    $('#donate_guide').removeClass('hidden');
}</script></div><div class="addthis_sharing_toolbox"></div><div class="tags"><a href="/tags/ChatGPT/"><i class="fa fa-tag"></i>ChatGPT</a><a href="/tags/Prompt/"><i class="fa fa-tag"></i>Prompt</a></div><div class="post-nav"><a class="pre" href="/2023/08/23/employment_renewal/">劳动合同到期不续签，一张图告诉你这些情况有钱可以拿！</a><a class="next" href="/2023/08/21/loyalty-agreement/">夫妻忠诚协议真的有用吗？</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://selfboot.cn/2023/08/23/not-smart-chatgpt/';
    this.page.identifier = '2023/08/23/not-smart-chatgpt/';
    this.page.title = '真实例子告诉你 ChatGPT 是多会胡编乱造！';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//xuelangZF.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//xuelangZF.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://xuelangZF.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="https://www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://selfboot.cn"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/">工具介绍</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B3%95%E5%BE%8B%E6%99%AE%E5%8F%8A/">法律普及</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/">源码剖析</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A4%BE%E4%BC%9A%E7%99%BE%E6%80%81/">社会百态</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">程序设计</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%87%91%E8%9E%8D/">金融</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/">项目实践</a><span class="category-list-count">10</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">教程</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 15px;">总结</a> <a href="/tags/%E6%96%B9%E6%B3%95/" style="font-size: 15px;">方法</a> <a href="/tags/Google/" style="font-size: 15px;">Google</a> <a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 15px;">思考</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/%E8%A7%81%E9%97%BB/" style="font-size: 15px;">见闻</a> <a href="/tags/Protocol/" style="font-size: 15px;">Protocol</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/Flask/" style="font-size: 15px;">Flask</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/%E6%B3%95%E5%BE%8B/" style="font-size: 15px;">法律</a> <a href="/tags/ChatGPT/" style="font-size: 15px;">ChatGPT</a> <a href="/tags/Prompt/" style="font-size: 15px;">Prompt</a> <a href="/tags/Plugin/" style="font-size: 15px;">Plugin</a> <a href="/tags/Leetcode/" style="font-size: 15px;">Leetcode</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/Debug/" style="font-size: 15px;">Debug</a> <a href="/tags/Issue/" style="font-size: 15px;">Issue</a> <a href="/tags/eBPF/" style="font-size: 15px;">eBPF</a> <a href="/tags/%E5%A9%9A%E5%A7%BB%E5%AE%B6%E5%BA%AD/" style="font-size: 15px;">婚姻家庭</a> <a href="/tags/Go/" style="font-size: 15px;">Go</a> <a href="/tags/%E5%88%91%E4%BA%8B/" style="font-size: 15px;">刑事</a> <a href="/tags/%E5%8A%B3%E5%8A%A8%E7%BA%A0%E7%BA%B7/" style="font-size: 15px;">劳动纠纷</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 15px;">数学</a> <a href="/tags/Gemini/" style="font-size: 15px;">Gemini</a> <a href="/tags/google/" style="font-size: 15px;">google</a></div></div><!-- Debug: page.path = 2023/08/23/not-smart-chatgpt/ --><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul><li><a href="/2024/05/19/stream_sse_chunk/" title="结合实例理解流式输出的几种实现方法">结合实例理解流式输出的几种实现方法</a></li><li><a href="/2024/05/10/c++_object_model/" title="结合实例深入理解 C++ 对象的内存布局">结合实例深入理解 C++ 对象的内存布局</a></li><li><a href="/2024/05/07/variadic_arguments_in_c++/" title="C++ 函数可变参实现方法的演进">C++ 函数可变参实现方法的演进</a></li><li><a href="/2024/03/15/object_memory_coredump/" title="Bazel 依赖缺失导致的 C++ 进程 coredump 问题分析">Bazel 依赖缺失导致的 C++ 进程 coredump 问题分析</a></li><li><a href="/2024/01/25/why_need_use_gpt_asap/" title="为什么一定要尽快用上 ChatGPT 等大语言模型">为什么一定要尽快用上 ChatGPT 等大语言模型</a></li><li><a href="/2024/01/18/supply_chain_attack_on_pytorch/" title="我们是如何对 PyTorch 发起供应链攻击的 (译文)">我们是如何对 PyTorch 发起供应链攻击的 (译文)</a></li><li><a href="/2024/01/17/c++_string_cow/" title="C++ string 意外修改之深入理解 COW 写时复制">C++ string 意外修改之深入理解 COW 写时复制</a></li><li><a href="/2024/01/09/openai_python_sdk_learn/" title="跟 OpenAI 学写 ChatGPT API 的 Python SDK 库">跟 OpenAI 学写 ChatGPT API 的 Python SDK 库</a></li><li><a href="/2024/01/03/hexo_blog_speed/" title="个人博客访问速度优化：CDN, 图片压缩, HTTP2">个人博客访问速度优化：CDN, 图片压缩, HTTP2</a></li><li><a href="/2023/12/28/black_hat_SEO/" title="从外围引流贴看黑产的搜索引擎排名优化生意">从外围引流贴看黑产的搜索引擎排名优化生意</a></li></ul></div><div class="widget" id="toc"><div class="widget-title"><i class="fa fa-list-ul"> 文章目录</i></div><ul class="dsq-widget-list"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#pytz-%E7%9A%84%E5%8C%97%E4%BA%AC%E6%97%B6%E5%8C%BA"><span class="toc-number">1.</span> <span class="toc-text">pytz 的北京时区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%BF%E4%B8%9C%E4%B8%8D%E9%80%80%E6%8A%BC%E9%87%91%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">房东不退押金？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E8%83%BD%E6%BF%80%E6%B4%BB%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">不能激活的插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E8%AF%86%E5%88%AB%E9%94%99%E8%AF%AF"><span class="toc-number">4.</span> <span class="toc-text">图像识别错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%BB%E4%B8%8D%E5%87%BA%E6%9D%A5%E7%9A%84%E9%93%BE%E8%A1%A8%E5%9B%BE"><span class="toc-number">5.</span> <span class="toc-text">画不出来的链表图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A%E5%99%A8%E5%BA%93%E7%BC%BA%E5%A4%B1"><span class="toc-number">6.</span> <span class="toc-text">代码解释器库缺失</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Clickhouse-%E5%87%BD%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">Clickhouse 函数</span></a></li></ol></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2024 <a href="/." rel="nofollow">Just For Fun.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/selfboot/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/selfboot"> SelfBoot.</a><p><span id="busuanzi_container_site_pv"></span>本站总访问量<span id="busuanzi_value_site_pv"></span>次，<span id="busuanzi_container_site_uv"></span>本站访客数<span id="busuanzi_value_site_uv"></span>人次</p></div></div></div><link rel="stylesheet" type="text/css" href="/css/donate.css"><link rel="stylesheet" type="text/css" href="/css/copyright.css"><a class="show" id="rocket" href="#top" aria-label="Back to top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script><script type="text/javascript" src="/js/jquery.fancybox.min.js" defer=""></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" defer=""></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.min.css"><script type="text/javascript" src="/js/toc.js?v=1.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>